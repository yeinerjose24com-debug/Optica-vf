<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=1400" />
  <title>VF Optical | Cat√°logo</title>
  <style>
    /* Reset + tipograf√≠a */
    * { box-sizing: border-box; margin:0; padding:0; font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
    :root {
      --oro: #D4AF37;
      --negro: #0b0b0b;
      --fondo: #fbfbfb;
      --card-bg: #fff;
    }
  body { background: var(--fondo); color:var(--negro); -webkit-font-smoothing:antialiased; overflow-x:hidden; }
  html { scroll-behavior: smooth; }

    /* Header */
    header { background: var(--negro); padding:18px 24px; display:flex; align-items:center; gap:18px; justify-content:space-between; position:relative; z-index:30;}
    header .brand { display:flex; align-items:center; gap:12px; color:var(--oro); }
    header img.logo { width:85px; height:85px; object-fit:cover; border-radius:50%; border:4px solid var(--oro); }
    header nav.top { display:flex; gap:18px; align-items:center; font-weight:600; color:#fff; }
    header nav.top a { color:#fff; text-decoration:none; font-size:14px; letter-spacing:0.6px; padding:8px 10px; border-radius:8px; }
    header nav.top a:hover { background: rgba(255,255,255,0.04); }
    .header-icons { display:flex; align-items:center; gap:12px; }
    .icon-btn { width:40px; height:40px; border-radius:50%; background:var(--negro); border:2px solid rgba(255,255,255,0.06); display:flex; align-items:center; justify-content:center; color:var(--oro); font-size:18px; cursor:pointer; position:relative; transition: background .2s; }
    .icon-badge { position:absolute; top:-6px; right:-6px; background:var(--oro); color:#000; font-weight:700; font-size:12px; padding:2px 6px; border-radius:999px; }

    /* Decoracion lateral (moda1) */
    .decoracion { position:fixed; left:12px; top:120px; width:140px; z-index:20; display:block; }
    /* Hice la imagen m√°s flexible para "cubrir" mejor el contenedor sin recortarlo mal */
    .decoracion img { width:100%; height:60vh; max-height:520px; object-fit:cover; border-radius:12px; box-shadow:0 8px 30px rgba(0,0,0,0.12); }

    /* Hero video (gif-like) */
    .hero { background: #fff; display:flex; align-items:center; justify-content:center; padding:18px 0; border-bottom:1px solid #eee; }
    .hero video, .hero img { max-width:1200px; width:100%; height:420px; object-fit:cover; border-radius:8px; box-shadow:0 8px 30px rgba(0,0,0,0.06); }

    /* Colecci√≥n nueva */
    .coleccion-nueva { display:flex; gap:30px; align-items:center; justify-content:center; padding:48px 20px; max-width:1200px; margin:0 auto; background:transparent; }
    .coleccion-nueva .foto { width:420px; height:520px; border-radius:14px; overflow:hidden; box-shadow:0 10px 30px rgba(0,0,0,0.08); cursor:pointer; }
    .coleccion-nueva .foto img { width:100%; height:100%; object-fit:cover; display:block; transition: transform 0.4s cubic-bezier(.25,.46,.45,.94); }
    .coleccion-nueva .foto:hover img { transform: scale(1.05); }
    .coleccion-nueva .texto { max-width:560px; }
    .coleccion-nueva h2 { font-size:32px; margin-bottom:10px; color:var(--negro); }
    .coleccion-nueva p { color:#555; line-height:1.5; }

    /* Destacados (nueva secci√≥n) */
    .destacados { max-width:1400px; margin:20px auto 40px; padding:20px; display:flex; gap:18px; justify-content:center; }
    .destacado-card { background:var(--card-bg); border-radius:12px; padding:12px; width:340px; box-shadow:0 8px 20px rgba(0,0,0,0.06); text-align:center; cursor:pointer; transition: transform 0.3s ease, box-shadow 0.3s ease; }
    .destacado-card:hover { transform: translateY(-6px); box-shadow: 0 12px 28px rgba(0,0,0,0.1); }
    .destacado-card img { width:100%; height:250px; object-fit:cover; border-radius:8px; margin-bottom:12px; }
    .destacado-card.highlight { box-shadow: 0 18px 40px rgba(212,175,55,0.18), 0 6px 24px rgba(0,0,0,0.08); transform: translateY(-6px); border: 2px solid var(--oro); }
    @keyframes destHighlight {
      0% { box-shadow: 0 6px 18px rgba(0,0,0,0.06); transform: translateY(0); }
      30% { box-shadow: 0 20px 50px rgba(212,175,55,0.18); transform: translateY(-8px); }
      100% { box-shadow: 0 8px 20px rgba(0,0,0,0.06); transform: translateY(0); }
    }

    /* Filters */
    .filtros { display:flex; gap:12px; justify-content:center; padding:26px 20px; background:var(--card-bg); border-bottom:1px solid #eee; position:relative; z-index:10; }
    .filtros button { background:transparent; border:2px solid transparent; padding:10px 18px; border-radius:10px; cursor:pointer; font-weight:600; letter-spacing:0.4px; transition:all .22s; }
    .filtros button.active { background:var(--negro); color:#fff; border-color:var(--oro); box-shadow:0 6px 18px rgba(0,0,0,0.06); }

    /* Cat√°logo estilo revista (grid amplio) */
    .catalogo { display:grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap:32px; padding:24px 50px 80px; max-width:1300px; margin:0 auto; }
    .producto {
      position:relative; overflow:hidden; border-radius:14px; background:#fafafa; cursor:pointer;
      transition:transform .35s ease, box-shadow .35s ease;
      display:flex; flex-direction:column;
    }
    .producto:hover { transform:translateY(-8px); box-shadow:0 18px 40px rgba(0,0,0,0.12); }
    .producto .imgwrap { width:100%; height:320px; background:#fff; display:flex; align-items:center; justify-content:center; }
    .producto img { max-width:100%; max-height:100%; object-fit:cover; display:block; }
    .producto .info-card { padding:14px; display:flex; justify-content:space-between; align-items:center; gap:10px; }
    .producto .info-card h3 { margin:0; font-size:18px; }
    .producto .info-card p { margin:0; color:var(--oro); font-weight:700; }

    /* overlay info en la imagen (elegante) */
    .producto-info {
      position:absolute; left:14px; right:14px; bottom:14px; background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.46) 100%);
      color:#fff; padding:14px; border-radius:10px; display:flex; justify-content:space-between; align-items:center;
      gap:10px;
    }
    .producto-info .meta { text-align:left; }
    .producto-info h3 { font-size:18px; font-weight:600; margin-bottom:6px; letter-spacing:0.3px; }
    .producto-info p { color:var(--oro); font-weight:700; font-size:15px; }

    /* Vista detalle tipo ficha */
    .detalle-wrap { display:none; padding:40px; max-width:1200px; margin:0 auto 60px; background:var(--card-bg); border-radius:12px; box-shadow:0 12px 40px rgba(0,0,0,0.06); }
    .detalle { display:grid; grid-template-columns:1fr 420px; gap:28px; align-items:start; }
    .detalle .galeria { display:flex; gap:10px; }
    .detalle .galeria img { width:calc(50% - 5px); height:320px; object-fit:cover; border-radius:8px; }
    .detalle .foto { background:#f6f6f6; padding:12px; border-radius:10px; display:flex; align-items:center; justify-content:center; }
    /* Hacemos las im√°genes del detalle clickables para el zoom */
    .detalle .foto img, .detalle .galeria img {
      cursor: zoom-in;
    }
    .detalle .foto img { width:100%; height:auto; max-height:640px; object-fit:contain; border-radius:8px; }
    .detalle .info h2 { font-size:28px; margin-bottom:8px; font-weight:700; }
    .detalle .info .precio { color:var(--oro); font-weight:800; font-size:20px; margin:10px 0 12px; }
    .detalle .info .specs { display:flex; flex-direction:column; gap:8px; margin-bottom:12px; color:#333; }
    .btn { padding:12px 18px; border-radius:8px; font-weight:700; cursor:pointer; border:none; }
    .btn.primary { background:var(--oro); color:var(--negro); }
    .btn.ghost { background:transparent; border:2px solid var(--oro); color:var(--negro); }
    .volver { margin-top:18px; color:#666; cursor:pointer; text-decoration:underline; background:none; border:none; font-weight:600; }

    /* Carrito lateral */
    .carrito-panel {
      position: fixed;
      right: -420px;
      top: 0;
      width: 380px;
      height: 100vh;
      background: #fff;
      box-shadow: -8px 0 30px rgba(0,0,0,0.15);
      transition: right .36s cubic-bezier(.2,.9,.2,1);
      z-index:120;
      display:flex;
      flex-direction:column;
    }
    .carrito-panel.open { right: 0; }
    .carrito-header { background:var(--negro); color:#fff; padding:18px; display:flex; justify-content:space-between; align-items:center; }
    .carrito-items { padding:16px; overflow:auto; flex:1; }
    .carrito-item { display:flex; gap:10px; align-items:center; border-bottom:1px solid #eee; padding:12px 0; }
    .carrito-item img { width:64px; height:64px; object-fit:cover; border-radius:8px; }
    .carrito-item .meta { flex:1; }
    .carrito-item .meta strong { display:block; font-size:15px; margin-bottom:6px; }
    .carrito-item .meta small { color:#777; }
    .carrito-item .acciones { display:flex; flex-direction:column; gap:6px; align-items:flex-end; }
    .carrito-total { padding:16px; border-top:1px solid #eee; }
    .carrito-total .total { font-weight:800; font-size:18px; margin-bottom:10px; }
    .btn.checkout { width:100%; padding:12px; background:var(--negro); color:#fff; border-radius:8px; cursor:pointer; font-weight:800; border:2px solid var(--oro); }

    /* Panel de Seguimiento */
    .seguimiento-panel {
      position: fixed;
      right: -420px;
      top: 0;
      width: 380px;
      height: 100vh;
      background: #fff;
      box-shadow: -8px 0 30px rgba(0,0,0,0.15);
      transition: right .36s cubic-bezier(.2,.9,.2,1);
      z-index:110; /* Debajo del carrito */
      display:flex;
      flex-direction:column;
    }
    .seguimiento-panel.open { right: 0; }
    .seguimiento-header { background:var(--negro); color:#fff; padding:18px; display:flex; justify-content:space-between; align-items:center; }
    .seguimiento-lista { padding: 24px; list-style: none; }
    .seguimiento-fase { display: flex; align-items: center; gap: 16px; margin-bottom: 20px; color: #888; transition: color 0.3s; }
    .seguimiento-fase svg { width: 28px; height: 28px; fill: currentColor; transition: fill 0.3s; }
    .seguimiento-fase.completed { color: var(--oro); font-weight: 600; }
    .seguimiento-fase .linea { flex-grow: 1; height: 2px; background: #eee; }
    .seguimiento-fase:last-child { margin-bottom: 0; }
    .seguimiento-fase .texto-fase { min-width: 150px; }

    /* Recomendaciones en panel de seguimiento */
    .seguimiento-extra { padding: 20px; border-top: 1px solid #eee; }
    .seguimiento-extra h4 { font-size: 16px; margin-bottom: 14px; text-align: center; }
    .recomendaciones-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    .recomendacion-item { text-align: center; cursor: pointer; }
    .recomendacion-item img { width: 100%; height: 120px; object-fit: cover; border-radius: 8px; margin-bottom: 8px; border: 1px solid #eee; }
    .recomendacion-item span { font-size: 13px; font-weight: 600; color: #333; }
    .recomendacion-item:hover span { color: var(--oro); }


    /* Modal para zoom de imagen */
    .zoom-modal { position:fixed; z-index:400; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.85); display:flex; align-items:center; justify-content:center; }
    .zoom-modal-content { max-width:90%; max-height:90%; object-fit:contain; }
    .zoom-close { position:absolute; top:20px; right:35px; color:#fff; font-size:40px; font-weight:bold; cursor:pointer; }

    /* Estilos para el link de Instagram */
    .contacto-social {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
    }
    .contacto-social img {
      width: 24px;
      height: 24px;
    }
    /* Barra de b√∫squeda */
    .search-bar { position: fixed; top: -100px; left: 0; right: 0; z-index: 200; background: var(--negro); padding: 12px 20px; display: flex; align-items: center; gap: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.2); transition: top 0.3s ease-out; }
    .search-bar.visible { top: 0; }
    .search-bar input { flex-grow: 1; background: #222; border: 1px solid #444; color: #fff; padding: 10px 14px; border-radius: 8px; font-size: 16px; }
    .search-bar input:focus { outline: none; border-color: var(--oro); }
    .search-bar .close-search { font-size: 24px; color: #fff; cursor: pointer; background: none; border: none; }

    /* Nuevos estilos para detalles t√©cnicos */
    .specs-tecnicas { margin-top: 20px; border-top: 1px solid #eee; padding-top: 20px; }
    .specs-tecnicas h4 { margin-bottom: 12px; font-size: 16px; color: #333; }
    .spec-item { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; font-size: 14px; }
    .spec-item svg { width: 20px; height: 20px; fill: var(--oro); flex-shrink: 0; }
    .spec-item .label { font-weight: 600; color: #111; min-width: 150px; }
    .spec-item .value { color: #555; }
    /* Misc */
    /* Carrito Flotante */
    .carrito-flotante {
      position: fixed;
      bottom: 25px;
      right: 25px;
      width: 60px;
      height: 60px;
      background: var(--negro);
      border-radius: 50%;
      display: none; /* Oculto por defecto */
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      cursor: pointer;
      z-index: 150;
    }
    .carrito-flotante.visible { display: flex; }
    .carrito-flotante svg { width: 28px; height: 28px; fill: var(--oro); }
    .contador-flotante {
      position: absolute;
      top: -4px;
      right: -4px;
      background: #ff3b30;
      color: white;
      font-size: 12px;
      font-weight: 700;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid var(--negro);
    }
    /* Seguimiento Flotante */
    .seguimiento-flotante {
      position: fixed;
      bottom: 95px; /* Encima del carrito flotante */
      right: 25px;
      width: 60px;
      height: 60px;
      background: var(--negro);
      border-radius: 50%;
      display: none; /* Oculto por defecto */
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      cursor: pointer;
      z-index: 150;
    }
    .hidden { display:none !important; }
    @media (max-width:1100px) {
      .producto .imgwrap{height:280px;}
      .coleccion-nueva { flex-direction:column; align-items:center; padding:34px 14px; }
      .coleccion-nueva .foto { width:92%; height:420px; }
      .decoracion { display:none; }
      .carrito-panel {
        width: 100%;
        right: -100%; /* Corregido: Ocultar completamente en m√≥vil */
      }
      .seguimiento-panel {
        width: 100%;
        right: -100%;
      }
      .detalle { grid-template-columns:1fr; gap: 20px; }
      .detalle .galeria {
        order: -1; /* Mueve la galer√≠a arriba de la info en m√≥vil */
        height: 150px; /* Altura m√°s peque√±a para las miniaturas */
      }
    }
  </style>
</head>
<body>

  
  <!-- HEADER -->
  <header>
    <div class="brand">
      <img src="static/logo-1.png" class="logo" alt="VF Optical">
      <div style="color:var(--oro); font-weight:700; letter-spacing:2px;">VF OPTICAL</div>
    </div>

    <nav class="top" aria-label="Navegaci√≥n principal">
      <!-- ENLACE COLECCI√ìN ahora llama a scrollToCollection para filtrar y hacer scroll correctamente -->
      <a href="#coleccion" id="link-coleccion">Colecci√≥n</a>
      <a href="#destacados">Destacados</a>
      <a href="#catalogo">Cat√°logo</a>
      <a href="#contacto">Contacto</a>
    </nav>

    <div class="header-icons">
      <div id="search-icon" class="icon-btn" title="Buscar">üîç</div>
      <div id="cart-icon" class="icon-btn" title="Ver carrito" aria-label="Ver carrito">
        üõí
        <div id="cart-count" class="icon-badge" style="display:none;">0</div>
      </div>
    </div>
  </header>

  <!-- BARRA DE B√öSQUEDA -->
  <div id="search-bar" class="search-bar">
    <input type="text" id="search-input" placeholder="Buscar por nombre o categor√≠a..." aria-label="Buscar productos">
    <button id="close-search" class="close-search" aria-label="Cerrar b√∫squeda">&times;</button>
  </div>

  <!-- HERO -->
  <section class="hero" aria-hidden="false">
    <video src="static/video1.mp4" autoplay muted loop playsinline preload="auto" poster="static/video1.mp4"></video>
  </section>

  <!-- COLECCI√ìN NUEVA -->
  <section id="coleccion" class="coleccion-nueva" aria-labelledby="coleccion-title">
    <div class="foto" onclick="scrollToCollection();">
      <!-- reemplaza por la imagen del modelo -->
      <img src="static/moda2.jpg" alt="Nueva Colecci√≥n - modelo">
    </div>
    <div class="texto">
      <h2 id="coleccion-title">Colecci√≥n Nueva</h2>
      <p>Descubre la nueva colecci√≥n de gafas: piezas exclusivas pensadas para la temporada. Haz clic en la imagen para ver los productos de esta colecci√≥n.</p>
      <p style="margin-top:18px;color:#555;">Al seleccionar un producto de la colecci√≥n se abrir√° la vista de detalle con m√°s im√°genes y opci√≥n de a√±adir al carrito.</p>
      <!-- Enlaces r√°pidos hacia los art√≠culos destacados -->
      <div style="margin-top:14px;">
        <strong style="display:block;margin-bottom:8px;color:#222;">Ir a destacados:</strong>
        <div style="display:flex;gap:8px;flex-wrap:wrap;">
          <a href="#dest-1" style="text-decoration:none;padding:8px 12px;border-radius:8px;border:1px solid var(--oro);color:var(--negro);background:#fff;font-weight:700;">Gafa Premium</a>
          <a href="#dest-2" style="text-decoration:none;padding:8px 12px;border-radius:8px;border:1px solid var(--oro);color:var(--negro);background:#fff;font-weight:700;">Reloj Cl√°sico</a>
          <a href="#dest-3" style="text-decoration:none;padding:8px 12px;border-radius:8px;border:1px solid var(--oro);color:var(--negro);background:#fff;font-weight:700;">Vintage Gold</a>
        </div>
      </div>
    </div>
  </section>

  <!-- ANCLA Y CONTENEDOR PARA DESTACADOS -->
  <div id="destacados" style="padding-top: 20px; margin-top: -20px;">
    <!-- T√≠tulo para Destacados -->
    <div style="text-align: center; margin-top: 50px;">
      <h2 style="font-size: 32px; font-weight: 800; letter-spacing: 2px; text-transform: uppercase; color: var(--negro);">
          <span style="color: var(--oro);">üî•</span> ON FIRE <span style="color: var(--oro);">üî•</span>
      </h2>
    </div>

    <!-- DESTACADOS -->
    <section class="destacados" aria-label="Productos destacados">
      <div id="dest-1" class="destacado-card">
      <img src="static/producto8.avif" alt="Destacado 1">
      <h4 style="margin-top:10px;">Gafa Premium</h4>
      <p style="color:var(--oro); font-weight:700;">$150.000</p>
    </div>
    <div id="dest-2" class="destacado-card">
      <img src="static/rolex1.webp" alt="Destacado 2">
      <h4 style="margin-top:10px;">Reloj Cl√°sico</h4>
      <p style="color:var(--oro); font-weight:700;">$220.000</p>
    </div>
    <div id="dest-3" class="destacado-card">
      <img src="static/producto9.avif" alt="Destacado 3">
      <h4 style="margin-top:10px;">Vintage Gold</h4>
      <p style="color:var(--oro); font-weight:700;">$180.000</p>
    </div>
    </section>
  </div>

  <!-- FILTROS -->
  <div class="filtros" role="toolbar" aria-label="Filtrar productos">
    <button class="filtro-btn active" data-filter="all">Todos</button>
    <button class="filtro-btn" data-filter="gafas">Gafas</button>
    <button class="filtro-btn" data-filter="relojes">Relojes</button>
    <button class="filtro-btn" data-filter="coleccion">Colecci√≥n</button>
  </div>

  <!-- CAT√ÅLOGO (incluye tus productos originales + nueva colecci√≥n) -->
  <main id="catalogo" class="catalogo" aria-live="polite">

    <!-- --- Productos existentes (mantengo tus originales exactamente) --- -->

    <!-- GAFAS -->
    <article class="producto" data-category="gafas"
      onclick="abrirDetalleFromEl(this, {nombre:'DAVID', montura:'Pulido Plateado', lentes:'Azul/Gris', precio:'$150.000', src:'static/producto_1.png', desc:'Montura met√°lica pulida, delicada y ligera. Lentes con gradiente azul.'})">
      <div class="imgwrap"><img src="static/producto_1.png" alt="DAVID - Gafa Pulido Plateado"></div>
      <div class="producto-info">
        <div class="meta">
          <h3>DAVID</h3>
          <p>$150.000</p>
        </div>
        <div class="cta-mini" title="Ver detalle">‚û§</div>
      </div>
    </article>

    <article class="producto" data-category="gafas"
      onclick="abrirDetalleFromEl(this, {nombre:'RUB√âN', montura:'Montura PVC', lentes:'Negro', precio:'$120.000', src:'static/producto_2.jpg', desc:'Dise√±o urbano y resistente, ideal para uso diario.'})">
      <div class="imgwrap"><img src="static/producto_2.jpg" alt="RUB√âN"></div>
      <div class="producto-info">
        <div class="meta">
          <h3>RUB√âN</h3>
          <p>$120.000</p>
        </div>
        <div>‚û§</div>
      </div>
    </article>

    <!-- RELOJ -->
    <article class="producto" data-category="relojes"
      onclick="abrirDetalleFromEl(this, {nombre:'Reloj Cl√°sico', montura:'Acero Inoxidable', lentes:'N/A', precio:'$220.000', src:'static/rolex1.webp', desc:'Movimiento suizo, correa de cuero y caja resistente al agua.'})">
      <div class="imgwrap"><img src="static/rolex1.webp" alt="Reloj Cl√°sico"></div>
      <div class="producto-info">
        <div class="meta">
          <h3>Reloj Cl√°sico</h3>
          <p>$220.000</p>
        </div>
        <div>‚û§</div>
      </div>
    </article>

    <article class="producto" data-category="relojes"
      onclick="abrirDetalleFromEl(this, {nombre:'Reloj Minimal', montura:'Acero Cepillado', lentes:'N/A', precio:'$240.000', src:'static/rolex2.webp', desc:'Est√©tica minimalista, ideal para looks formales.'})">
      <div class="imgwrap"><img src="static/rolex2.webp" alt="Reloj Minimal"></div>
      <div class="producto-info">
        <div class="meta">
          <h3>Reloj Minimal</h3>
          <p>$240.000</p>
        </div>
        <div>‚û§</div>
      </div>
    </article>

    <!-- M√°s items de ejemplo -->
    <article class="producto" data-category="gafas"
      onclick="abrirDetalleFromEl(this, {nombre:'VINTAGE GOLD', montura:'Dorado', lentes:'Ambar', precio:'$180.000', src:'static/producto_3.jpg', desc:'Dise√±o vintage con acabado dorado.'})">
      <div class="imgwrap"><img src="static/producto_3.jpg" alt="Vintage Gold"></div>
      <div class="producto-info">
        <div class="meta">
          <h3>VINTAGE GOLD</h3>
          <p>$180.000</p>
        </div>
        <div>‚û§</div>
      </div>
    </article>

    <!-- --- Nueva colecci√≥n: gafas (data-category="coleccion") --- -->
    <article class="producto" data-category="coleccion"
      onclick="abrirDetalleFromEl(this, {nombre:'Colecci√≥n - Aurora', montura:'Acabado Dorado', lentes:'Gradiente Azul', precio:'$210.000', src:'static/producto7.1.avif', extraImgs:['static/producto7.1.avif','static/producto7.2.avif'], desc:'Gafa premium de la nueva colecci√≥n Aurora.'})">
      <div class="imgwrap"><img src="static/producto7.1.avif" alt="Coleccion Aurora"></div>
      <div class="info-card">
        <h3>Colecci√≥n - Aurora</h3>
        <p>$210.000</p>
      </div>
    </article>

    <article class="producto" data-category="coleccion"
      onclick="abrirDetalleFromEl(this, {nombre:'Colecci√≥n - N√©bula', montura:'Negro Mate', lentes:'Polarizado', precio:'$195.000', src:'static/producto8.1.avif', extraImgs:['static/producto8.1.avif','static/producto8.2.avif'], desc:'Dise√±o urbano y elegante, colecci√≥n N√©bula.'})">
      <div class="imgwrap"><img src="static/producto8.1.avif" alt="Coleccion Nebula"></div>
      <div class="info-card">
        <h3>Colecci√≥n - N√©bula</h3>
        <p>$195.000</p>
      </div>
    </article>

    <article class="producto" data-category="coleccion"
      onclick="abrirDetalleFromEl(this, {nombre:'Colecci√≥n - Sol', montura:'Dorado Brillante', lentes:'Ambar', precio:'$230.000', src:'static/producto9.1.avif', extraImgs:['static/producto9.1.avif','static/producto9.2.avif'], desc:'Pieza ic√≥nica con acabado dorado.'})">
      <div class="imgwrap"><img src="static/producto9.1.avif" alt="Coleccion Sol"></div>
      <div class="info-card">
        <h3>Colecci√≥n - Sol</h3>
        <p>$230.000</p>
      </div>
    </article>

  </main>

  <!-- VISTA DETALLE (se usa para todos los productos compartido) -->
  <section id="detalle-wrap" class="detalle-wrap" aria-hidden="true">
    <div class="detalle" role="dialog" aria-modal="true">
      <div class="foto">
        <img id="detalle-img" src="" alt="Detalle producto">
      </div>

      <div class="info">
        <h2 id="detalle-nombre">Nombre</h2>
        <div class="precio" id="detalle-precio">$0</div>

        <!-- Galer√≠a extra (para nueva colecci√≥n con 2 im√°genes) -->
        <div class="galeria hidden" id="detalle-galeria">
          <img id="gal-1" src="" alt="Galer√≠a 1">
          <img id="gal-2" src="" alt="Galer√≠a 2">
        </div>

        <div class="specs">
          <div><strong>Montura:</strong> <span id="detalle-montura"></span></div>
          <div><strong>Lentes:</strong> <span id="detalle-lentes"></span></div>
          <div><strong>Disponibilidad:</strong> <span id="detalle-dispo">Consultar tienda</span></div>
        </div>

        <p id="detalle-desc" style="color:#444;">Descripci√≥n breve del producto y sus materiales.</p>

        <div class="cta" style="margin-top:10px;">
          <button class="btn primary" id="btn-add">A√±adir al carrito</button>
          <button class="btn ghost" id="btn-buy">Comprar ahora</button>
        </div>

        <button class="volver" id="volver-catalogo">Volver al cat√°logo</button>
      </div>
    </div>
  </section>

 <!-- DETALLES INDIVIDUALES DE LA NUEVA COLECCI√ìN -->
<!-- DETALLE AURORA -->
<section id="detalle-aurora" class="detalle-wrap hidden" aria-hidden="true">
  <div class="detalle">
    <div class="foto">
      <img src="static/producto7.avif" alt="Colecci√≥n Aurora principal">
    </div>
    <div class="info">
      <h2>Colecci√≥n - Aurora</h2>
      <div class="precio">$210.000</div>
      <div class="galeria">
        <img src="static/producto7.1.avif" alt="Aurora vista lateral">
        <img src="static/producto7.2.avif" alt="Aurora detalle montura">
      </div>
      <div class="specs">
        <div><strong>Montura:</strong> Acabado Dorado</div>
        <div><strong>Lentes:</strong> Gradiente Azul</div>
        <div><strong>Disponibilidad:</strong> En tienda y online</div>
      </div>
      <p>Gafa premium de la colecci√≥n Aurora. Su estructura met√°lica con tonos dorados ofrece un toque elegante con lentes degradados en azul para un look sofisticado.</p>
      
      <div class="specs-tecnicas">
        <h4>Especificaciones T√©cnicas</h4>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M20.41 4.94l-1.35-1.35a4.01 4.01 0 00-5.66 0L4 12.59V17h4.41l8.94-8.94a4.01 4.01 0 002.06-5.12zM6 15v-2.59l7-7L15.59 8 8.59 15H6z"></path></svg><span class="label">C√≥digo de modelo:</span> <span class="value">RB2140 6773R5 50-22</span></div>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></svg><span class="label">Forma:</span> <span class="value">Cuadrada</span></div>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-1.22-1.38-2.02-3.11-2.02-5.04 0-3.86 3.14-7 7-7 .92 0 1.76.18 2.52.48.6.23 1.28-.11 1.51-.71.23-.61-.11-1.28-.71-1.51C16.33 3.24 14.23 3 12 3z"></path></svg><span class="label">Color montura:</span> <span class="value">Pulido Gris Trasl√∫cido</span></div>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M20.5 6.5c-1.38 0-2.5 1.12-2.5 2.5s1.12 2.5 2.5 2.5 2.5-1.12 2.5-2.5-1.12-2.5-2.5-2.5zM3.5 11.5c1.38 0 2.5-1.12 2.5-2.5S4.88 6.5 3.5 6.5 1 7.62 1 9s1.12 2.5 2.5 2.5zM20.5 4c2.48 0 4.5 2.02 4.5 4.5s-2.02 4.5-4.5 4.5-4.5-2.02-4.5-4.5S18.02 4 20.5 4zM3.5 4C1.02 4-1 6.02-1 8.5S1.02 13 3.5 13s4.5-2.02 4.5-4.5S5.98 4 3.5 4zM12 16c-3.31 0-6 2.69-6 6h12c0-3.31-2.69-6-6-6z"></path></svg><span class="label">Material:</span> <span class="value">Acetato</span></div>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"></path></svg><span class="label">Color cristales:</span> <span class="value">Azul (Color S√≥lido)</span></div>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M22 8v10c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V8c0-1.86 1.28-3.41 3-3.86V2h3v2h8V2h3v2.14c1.72.45 3 2 3 3.86zM4 18h16V9.99c0-.01 0-.01 0 0H4v8.01z"></path></svg><span class="label">Calibre:</span> <span class="value">50 22mm</span></div>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></svg><span class="label">Geofit:</span> <span class="value">Ajuste de puente alto</span></div>
      </div>

      <div style="margin-top:10px;">
        <button class="btn primary" onclick="agregarAlCarrito({nombre:'Colecci√≥n Aurora',precioText:'$210.000',precioVal:210000,img:'static/producto7.1.avif'})">A√±adir al carrito</button>
        <button class="btn ghost" onclick="mostrarModalCompra(); iniciarSeguimiento();">Comprar ahora</button>
      </div>
      <button class="volver" onclick="volverCatalogo('detalle-aurora')">Volver al cat√°logo</button>
    </div>
  </div>
</section>

<!-- DETALLE N√âBULA -->
<section id="detalle-nebula" class="detalle-wrap hidden" aria-hidden="true">
  <div class="detalle">
    <div class="foto">
      <img src="static/producto8.avif" alt="Colecci√≥n N√©bula principal">
    </div>
    <div class="info">
      <h2>Colecci√≥n - N√©bula</h2>
      <div class="precio">$195.000</div>
      <div class="galeria">
        <img src="static/producto8.1.avif" alt="N√©bula vista lateral">
        <img src="static/producto8.2.avif" alt="N√©bula detalle montura">
      </div>
      <div class="specs">
        <div><strong>Montura:</strong> Negro Mate</div>
        <div><strong>Lentes:</strong> Polarizado</div>
        <div><strong>Disponibilidad:</strong> Online</div>
      </div>
      <p>Dise√±o moderno con montura en negro mate y lentes polarizados. Ideal para quienes buscan elegancia con protecci√≥n total.</p>

      <div class="specs-tecnicas">
        <h4>Especificaciones T√©cnicas</h4>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M20.41 4.94l-1.35-1.35a4.01 4.01 0 00-5.66 0L4 12.59V17h4.41l8.94-8.94a4.01 4.01 0 002.06-5.12zM6 15v-2.59l7-7L15.59 8 8.59 15H6z"></path></svg><span class="label">C√≥digo de modelo:</span> <span class="value">NB3050 1001/T3 52-20</span></div>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></svg><span class="label">Forma:</span> <span class="value">Rectangular</span></div>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-1.22-1.38-2.02-3.11-2.02-5.04 0-3.86 3.14-7 7-7 .92 0 1.76.18 2.52.48.6.23 1.28-.11 1.51-.71.23-.61-.11-1.28-.71-1.51C16.33 3.24 14.23 3 12 3z"></path></svg><span class="label">Color montura:</span> <span class="value">Negro Mate</span></div>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M20.5 6.5c-1.38 0-2.5 1.12-2.5 2.5s1.12 2.5 2.5 2.5 2.5-1.12 2.5-2.5-1.12-2.5-2.5-2.5zM3.5 11.5c1.38 0 2.5-1.12 2.5-2.5S4.88 6.5 3.5 6.5 1 7.62 1 9s1.12 2.5 2.5 2.5zM20.5 4c2.48 0 4.5 2.02 4.5 4.5s-2.02 4.5-4.5 4.5-4.5-2.02-4.5-4.5S18.02 4 20.5 4zM3.5 4C1.02 4-1 6.02-1 8.5S1.02 13 3.5 13s4.5-2.02 4.5-4.5S5.98 4 3.5 4zM12 16c-3.31 0-6 2.69-6 6h12c0-3.31-2.69-6-6-6z"></path></svg><span class="label">Material:</span> <span class="value">Acetato</span></div>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"></path></svg><span class="label">Color cristales:</span> <span class="value">Gris (Polarizado)</span></div>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M22 8v10c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V8c0-1.86 1.28-3.41 3-3.86V2h3v2h8V2h3v2.14c1.72.45 3 2 3 3.86zM4 18h16V9.99c0-.01 0-.01 0 0H4v8.01z"></path></svg><span class="label">Calibre:</span> <span class="value">52 20mm</span></div>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></svg><span class="label">Geofit:</span> <span class="value">Ajuste est√°ndar</span></div>
      </div>

      <div style="margin-top:10px;">
        <button class="btn primary" onclick="agregarAlCarrito({nombre:'Colecci√≥n N√©bula',precioText:'$195.000',precioVal:195000,img:'static/producto8.1.avif'})">A√±adir al carrito</button>
        <button class="btn ghost" onclick="mostrarModalCompra(); iniciarSeguimiento();">Comprar ahora</button>
      </div>
      <button class="volver" onclick="volverCatalogo('detalle-nebula')">Volver al cat√°logo</button>
    </div>
  </div>
</section>

<!-- DETALLE SOL -->
<section id="detalle-sol" class="detalle-wrap hidden" aria-hidden="true">
  <div class="detalle">
    <div class="foto">
      <img src="static/producto9.avif" alt="Colecci√≥n Sol principal">
    </div>
    <div class="info">
      <h2>Colecci√≥n - Sol</h2>
      <div class="precio">$230.000</div>
      <div class="galeria">
        <img src="static/producto9.1.avif" alt="Sol vista lateral">
        <img src="static/producto9.2.avif" alt="Sol detalle montura">
      </div>
      <div class="specs">
        <div><strong>Montura:</strong> Dorado Brillante</div>
        <div><strong>Lentes:</strong> √Åmbar</div>
        <div><strong>Disponibilidad:</strong> En tienda</div>
      </div>
      <p>Pieza ic√≥nica de la nueva colecci√≥n con acabado dorado brillante. Inspirada en la luz y el color del verano.</p>

      <div class="specs-tecnicas">
        <h4>Especificaciones T√©cnicas</h4>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M20.41 4.94l-1.35-1.35a4.01 4.01 0 00-5.66 0L4 12.59V17h4.41l8.94-8.94a4.01 4.01 0 002.06-5.12zM6 15v-2.59l7-7L15.59 8 8.59 15H6z"></path></svg><span class="label">C√≥digo de modelo:</span> <span class="value">SL4022 9012/A2 48-24</span></div>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></svg><span class="label">Forma:</span> <span class="value">Redonda</span></div>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-1.22-1.38-2.02-3.11-2.02-5.04 0-3.86 3.14-7 7-7 .92 0 1.76.18 2.52.48.6.23 1.28-.11 1.51-.71.23-.61-.11-1.28-.71-1.51C16.33 3.24 14.23 3 12 3z"></path></svg><span class="label">Color montura:</span> <span class="value">Dorado Brillante</span></div>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M20.5 6.5c-1.38 0-2.5 1.12-2.5 2.5s1.12 2.5 2.5 2.5 2.5-1.12 2.5-2.5-1.12-2.5-2.5-2.5zM3.5 11.5c1.38 0 2.5-1.12 2.5-2.5S4.88 6.5 3.5 6.5 1 7.62 1 9s1.12 2.5 2.5 2.5zM20.5 4c2.48 0 4.5 2.02 4.5 4.5s-2.02 4.5-4.5 4.5-4.5-2.02-4.5-4.5S18.02 4 20.5 4zM3.5 4C1.02 4-1 6.02-1 8.5S1.02 13 3.5 13s4.5-2.02 4.5-4.5S5.98 4 3.5 4zM12 16c-3.31 0-6 2.69-6 6h12c0-3.31-2.69-6-6-6z"></path></svg><span class="label">Material:</span> <span class="value">Metal</span></div>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"></path></svg><span class="label">Color cristales:</span> <span class="value">√Åmbar</span></div>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M22 8v10c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V8c0-1.86 1.28-3.41 3-3.86V2h3v2h8V2h3v2.14c1.72.45 3 2 3 3.86zM4 18h16V9.99c0-.01 0-.01 0 0H4v8.01z"></path></svg><span class="label">Calibre:</span> <span class="value">48 24mm</span></div>
        <div class="spec-item"><svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></svg><span class="label">Geofit:</span> <span class="value">Ajuste de puente bajo</span></div>
      </div>

      <div style="margin-top:10px;">
        <button class="btn primary" onclick="agregarAlCarrito({nombre:'Colecci√≥n Sol',precioText:'$230.000',precioVal:230000,img:'static/producto9.1.avif'})">A√±adir al carrito</button>
        <button class="btn ghost" onclick="mostrarModalCompra(); iniciarSeguimiento();">Comprar ahora</button>
      </div>
      <button class="volver" onclick="volverCatalogo('detalle-sol')">Volver al cat√°logo</button>
    </div>
  </div>
</section>

  <!-- CARRITO LATERAL -->
  <aside id="carrito-panel" class="carrito-panel" aria-hidden="true">
    <div class="carrito-header">
      <div style="font-weight:800; font-size:16px;">Tu carrito</div>
      <button id="close-carrito" style="background:none;border:none;color:#fff;font-size:20px;cursor:pointer;">‚úñ</button>
    </div>

    <div class="carrito-items" id="carrito-items">
      <div class="carrito-vacio" id="carrito-vacio">A√∫n no hay productos.</div>
    </div>

    <div class="carrito-total" id="carrito-total">
      <div class="total">Total: <span id="carrito-total-valor">$0</span></div>
      <button class="btn checkout" id="carrito-comprar">Finalizar compra</button>
    </div>
  </aside>

  <!-- PANEL DE SEGUIMIENTO -->
  <aside id="seguimiento-panel" class="seguimiento-panel" aria-hidden="true">
    <div class="seguimiento-header">
      <div style="font-weight:800; font-size:16px;">Seguimiento de Env√≠o</div>
      <button id="close-seguimiento" style="background:none;border:none;color:#fff;font-size:20px;cursor:pointer;">‚úñ</button>
    </div>
    <ul class="seguimiento-lista">
      <li class="seguimiento-fase" data-fase="1">
        <svg viewBox="0 0 24 24"><path d="M20.54 5.23l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM6.24 5h11.52l.83 1H5.41l.83-1zM5 19V8h14v11H5z"></path></svg>
        <span class="texto-fase">Preparando paquete</span>
      </li>
      <li class="seguimiento-fase" data-fase="2">
        <svg viewBox="0 0 24 24"><path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"></path></svg>
        <span class="texto-fase">Paquete en vuelo</span>
      </li>
      <li class="seguimiento-fase" data-fase="3">
        <svg viewBox="0 0 24 24"><path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm13.5-8.5l1.96 2.5H17V9.5h2.5zM18 18c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"></path></svg>
        <span class="texto-fase">Paquete en ruta</span>
      </li>
      <li class="seguimiento-fase" data-fase="4">
        <svg viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"></path></svg>
        <span class="texto-fase">Proceso de entrega</span>
      </li>
      <li class="seguimiento-fase" data-fase="5">
        <svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg>
        <span class="texto-fase">Paquete entregado</span>
      </li>
    </ul>
    <!-- RECOMENDACIONES Y BOT√ìN LISTO (oculto por defecto) -->
    <div id="seguimiento-recomendaciones" class="seguimiento-extra hidden">
      <h4>Te recomendamos estos productos</h4>
      <div class="recomendaciones-grid">
        <div class="recomendacion-item" onclick="abrirDetalleDesdeRecomendacion('individual', 'detalle-aurora')">
          <img src="static/producto7.1.avif" alt="Recomendaci√≥n: Colecci√≥n Aurora">
          <span>Colecci√≥n Aurora</span>
        </div>
        <div class="recomendacion-item" onclick="abrirDetalleDesdeRecomendacion('shared', 'Reloj Cl√°sico')">
          <img src="static/rolex1.webp" alt="Recomendaci√≥n: Reloj Cl√°sico">
          <span>Reloj Cl√°sico</span>
        </div>
      </div>
      <button id="seguimiento-listo" class="btn primary" style="width:100%; margin-top: 20px;">Listo</button>
    </div>
  </aside>

  <!-- CONTACTO -->
  <section id="contacto" style="max-width:1200px;margin:40px auto;padding:20px;background:#fff;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,0.06);">
    <h2 style="margin-bottom:10px;">Contacto</h2>
    <p>Correo: <a href="mailto:vfoptical@gmail.com">vfoptical@gmail.com</a></p>
    <p>Tel√©fono: <a href="tel:+573126182345">+57 3126182345</a></p>
    <div class="contacto-social">
      <a href="https://www.instagram.com/vfoptical25/" target="_blank" rel="noopener noreferrer" style="display:flex; align-items:center; gap: 8px; text-decoration: none; color: var(--negro); font-weight: 600;">
        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram"> S√≠guenos en Instagram
      </a>
    </div>
  </section>

  <!-- ICONO DE CARRITO FLOTANTE -->
  <div id="carrito-flotante" class="carrito-flotante">
    <!-- Icono SVG de carrito -->
    <svg viewBox="0 0 24 24"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.9 2 1.99 2 2-.9 2-2-.9-2-2-2z"></path></svg>
    <!-- Contador din√°mico -->
    <div id="contador-flotante" class="contador-flotante">0</div>
  </div>

  <!-- ICONO DE SEGUIMIENTO FLOTANTE -->
  <div id="seguimiento-flotante" class="seguimiento-flotante">
    <!-- Icono SVG de cami√≥n -->
    <svg style="width: 28px; height: 28px; fill: var(--oro);" viewBox="0 0 24 24"><path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm13.5-8.5l1.96 2.5H17V9.5h2.5zM18 18c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"></path></svg>
  </div>


  <!-- Modal de confirmaci√≥n de compra -->
  <div id="compra-modal" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.4);z-index:300;">
    <div style="background:#fff;padding:20px 24px;border-radius:10px;min-width:280px;max-width:90%;text-align:center;box-shadow:0 12px 40px rgba(0,0,0,0.2);">
      <div style="font-weight:800;font-size:18px;margin-bottom:8px;">¬°Compra Exitosa!</div>
      <div style="color:#444;margin-bottom:14px;">Tu compra ha sido exitosa, preparando para fase de env√≠o.</div>
      <button id="compra-modal-cerrar" class="btn primary" style="min-width:120px;">Cerrar</button>
    </div>
  </div>

  <!-- Modal para carrito vac√≠o -->
  <div id="vacio-modal" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.4);z-index:300;">
    <div style="background:#fff;padding:20px 24px;border-radius:10px;min-width:280px;max-width:90%;text-align:center;box-shadow:0 12px 40px rgba(0,0,0,0.2);">
      <div style="font-weight:800;font-size:18px;margin-bottom:8px;">Aqu√≠ no hay nada</div>
      <div style="color:#444;margin-bottom:14px;">Tu carrito est√° vac√≠o. A√±ade productos para poder comprar.</div>
      <button id="vacio-modal-cerrar" class="btn primary" style="min-width:120px;">Entendido</button>
    </div>
  </div>

  <!-- Modal para zoom de imagen -->
  <div id="zoom-modal" class="zoom-modal" style="display:none;" onclick="cerrarZoom()">
    <span class="zoom-close" onclick="cerrarZoom()">&times;</span>
    <img class="zoom-modal-content" id="zoom-img">
  </div>

  <script>
    /**********************
     * FILTROS
     **********************/
    const filtroBtns = document.querySelectorAll('.filtro-btn');
    filtroBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelector('.filtro-btn.active')?.classList.remove('active');
        btn.classList.add('active');
        const f = btn.dataset.filter;
        document.querySelectorAll('.producto').forEach(prod => {
          prod.style.display = (f === 'all' || prod.dataset.category === f) ? '' : 'none';
        });
        // scroll suave al cat√°logo
        document.getElementById('catalogo')?.scrollIntoView({behavior:'smooth'});
      });
    });

    /**********************
     * NAV LINK a COLECCI√ìN
     **********************/
    // Evita comportamiento por defecto del enlace y usa nuestra funci√≥n estable
    document.getElementById('link-coleccion').addEventListener('click', (e) => {
      e.preventDefault();
      scrollToCollection();
    });

    /**********************
     * HELPER: Mostrar / Ocultar detalles
     **********************/
    function ocultarTodosDetalles() {
      // oculta vista detalle compartida
      const shared = document.getElementById('detalle-wrap');
      if (shared) {
        shared.style.display = 'none';
        shared.setAttribute('aria-hidden','true');
      }
      // oculta detalles individuales
      ['detalle-aurora','detalle-nebula','detalle-sol'].forEach(id => {
        const el = document.getElementById(id);
        if (el) {
          el.classList.add('hidden');
          el.setAttribute('aria-hidden','true');
        }
      });
    }

    function mostrarDetalle(id) {
      ocultarTodosDetalles();
      // ocultar cat√°logo para dar foco al detalle
      const catalogo = document.getElementById('catalogo');
      if (catalogo) catalogo.style.display = 'none';
      const el = document.getElementById(id);
      if (el) {
        el.classList.remove('hidden');
        el.style.display = 'block';
        el.setAttribute('aria-hidden','false');
        // scroll al detalle seleccionado
        setTimeout(()=> el.scrollIntoView({ behavior: 'smooth' }), 50);
      }
    }

    function volverCatalogo(idToHide) {
      // oculta un detalle individual espec√≠fico (si aplica)
      if (idToHide) {
        const el = document.getElementById(idToHide);
        if (el) {
          el.classList.add('hidden');
          el.setAttribute('aria-hidden','true');
        }
      }
      // oculta el detalle compartido por si estaba abierto
      const shared = document.getElementById('detalle-wrap');
      if (shared) { shared.style.display = 'none'; shared.setAttribute('aria-hidden','true'); }
      // mostrar cat√°logo
      const catalogo = document.getElementById('catalogo');
      if (catalogo) catalogo.style.display = 'grid';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    /**********************
     * DETALLES DE PRODUCTO (reutilizable)
     **********************/
    function abrirDetalleFromEl(el, info) {
      // Si es parte de la nueva colecci√≥n, abrimos su detalle individual
      if (info && typeof info.nombre === 'string' && info.nombre.includes('Aurora')) {
        mostrarDetalle('detalle-aurora');
        return;
      } else if (info && typeof info.nombre === 'string' && info.nombre.includes('N√©bula')) {
        mostrarDetalle('detalle-nebula');
        return;
      } else if (info && typeof info.nombre === 'string' && info.nombre.includes('Sol')) {
        mostrarDetalle('detalle-sol');
        return;
      }

      // Si no pertenece a la colecci√≥n nueva, usa el detalle compartido anterior
      ocultarTodosDetalles();
      const shared = document.getElementById('detalle-wrap');
      if (shared) {
        abrirDetalle(info);
        shared.style.display = 'block';
        shared.setAttribute('aria-hidden','false');
        // scroll al detalle compartido
        setTimeout(()=> shared.scrollIntoView({ behavior: 'smooth' }), 50);
      }
    }

    function abrirDetalle({nombre, montura, lentes, precio, src, extraImgs = [], desc}) {
      // cargar datos en el detalle compartido
      const imgEl = document.getElementById('detalle-img'); // Aseg√∫rate que el src tenga el prefijo 'static/'
      if (imgEl) imgEl.src = src || '';

      document.getElementById('detalle-nombre').textContent = nombre || '';
      document.getElementById('detalle-montura').textContent = montura || '‚Äî';
      document.getElementById('detalle-lentes').textContent = lentes || '‚Äî';
      document.getElementById('detalle-precio').textContent = precio || '$0';
      document.getElementById('detalle-desc').textContent = desc || 'Sin descripci√≥n disponible.';

      // galer√≠a: si hay extraImgs (array con 2 rutas) mostrar galer√≠a
      const gal = document.getElementById('detalle-galeria');
      if (gal) {
        if (Array.isArray(extraImgs) && extraImgs.length >= 2) {
          gal.classList.remove('hidden');
          document.getElementById('gal-1').src = extraImgs[0];
          document.getElementById('gal-2').src = extraImgs[1];
        } else {
          gal.classList.add('hidden');
          document.getElementById('gal-1').src = '';
          document.getElementById('gal-2').src = '';
        }
      }

      // asignar comportamiento del bot√≥n a√±adir con la info actual
      const btnAdd = document.getElementById('btn-add');
      if (btnAdd) {
        btnAdd.onclick = () => {
          agregarAlCarrito({
            nombre: nombre,
            precioText: precio,
            precioVal: parsePrice(precio),
            img: src
          });
        };
      }

      // comprar ahora
      const btnBuy = document.getElementById('btn-buy');
      if (btnBuy) btnBuy.onclick = () => { 
        mostrarModalCompra(); 
        iniciarSeguimiento();
      };
    }

    // Conectar bot√≥n "Volver al cat√°logo" del detalle compartido
    document.getElementById('volver-catalogo').addEventListener('click', () => {
      volverCatalogo();
    });

    // helper: parse price string like "$150.000" to numeric 150000
    function parsePrice(priceStr) {
      if (!priceStr) return 0;
      const nums = priceStr.toString().replace(/[^\d]/g,'');
      return nums ? parseInt(nums,10) : 0;
    }

    /**********************
     * CARRITO
     **********************/
    const carritoPanel = document.getElementById('carrito-panel');
    const carritoItemsEl = document.getElementById('carrito-items');
    const carritoTotalValorEl = document.getElementById('carrito-total-valor');
    const cartIcon = document.getElementById('cart-icon');
    const floatingCart = document.getElementById('carrito-flotante');
    const floatingCounter = document.getElementById('contador-flotante');
    const cartCountBadge = document.getElementById('cart-count');
    const carrito = []; // { nombre, precioText, precioVal, img }

    // abrir/cerrar carrito
    cartIcon.addEventListener('click', () => {
      carritoPanel.classList.toggle('open');
      carritoPanel.setAttribute('aria-hidden', carritoPanel.classList.contains('open') ? 'false' : 'true');
    });
    document.getElementById('close-carrito').addEventListener('click', () => {
      carritoPanel.classList.remove('open');
    });
    // El carrito flotante tambi√©n abre el panel
    floatingCart.addEventListener('click', () => {
      carritoPanel.classList.add('open');
    });

    /**********************
     * SEGUIMIENTO
     **********************/
    const seguimientoPanel = document.getElementById('seguimiento-panel');
    const seguimientoFlotante = document.getElementById('seguimiento-flotante');

    document.getElementById('close-seguimiento').addEventListener('click', () => {
      seguimientoPanel.classList.remove('open');
    });
    seguimientoFlotante.addEventListener('click', () => {
      seguimientoPanel.classList.toggle('open');
      seguimientoPanel.setAttribute('aria-hidden', seguimientoPanel.classList.contains('open') ? 'false' : 'true');
    });
    // Bot√≥n "Listo" del seguimiento
    document.getElementById('seguimiento-listo').addEventListener('click', () => {
      seguimientoPanel.classList.remove('open');
      seguimientoFlotante.style.display = 'none';
      document.getElementById('seguimiento-recomendaciones').classList.add('hidden');
    });


    // agregar al carrito
    function agregarAlCarrito(item) {
      carrito.push(item);
      renderCarrito();
      // abrir carrito autom√°ticamente
      carritoPanel.classList.add('open');
      cartCountBadge.style.display = 'block';
      cartCountBadge.textContent = carrito.length;
    }

    // render carrito
    function renderCarrito() {
      if (carrito.length === 0) {
        carritoItemsEl.innerHTML = '<div class="carrito-vacio" id="carrito-vacio">A√∫n no hay productos.</div>';
        carritoTotalValorEl.textContent = '$0';
        cartCountBadge.style.display = 'none';
        floatingCart.classList.remove('visible'); // Ocultar flotante
        return;
      }

      carritoItemsEl.innerHTML = '';
      let total = 0;
      carrito.forEach((it, idx) => {
        total += it.precioVal || 0;
        const itemEl = document.createElement('div');
        itemEl.className = 'carrito-item';
        itemEl.innerHTML = `
          <img src="${it.img || 'static/producto_1.png'}" alt="${escapeHtml(it.nombre)}">
          <div class="meta">
            <strong>${escapeHtml(it.nombre)}</strong>
            <small>${escapeHtml(it.precioText)}</small>
          </div>
          <div class="acciones">
            <button onclick="eliminarItem(${idx})" aria-label="Eliminar">Eliminar</button>
          </div>
        `;
        carritoItemsEl.appendChild(itemEl);
      });

      carritoTotalValorEl.textContent = '$' + total.toLocaleString();
      cartCountBadge.style.display = 'block';
      cartCountBadge.textContent = carrito.length;
      floatingCart.classList.add('visible'); // Mostrar flotante
      floatingCounter.textContent = carrito.length;
    }

    // eliminar item
    function eliminarItem(index) {
      carrito.splice(index,1);
      renderCarrito();
    }

    // comprar todo -> muestra modal de confirmaci√≥n
    const compraModal = document.getElementById('compra-modal');
    const compraModalCerrar = document.getElementById('compra-modal-cerrar');
    function mostrarModalCompra() {
      compraModal.style.display = 'flex';
    }
    function ocultarModalCompra() {
      compraModal.style.display = 'none';
    }

    // Modal para carrito vac√≠o
    const vacioModal = document.getElementById('vacio-modal');
    const vacioModalCerrar = document.getElementById('vacio-modal-cerrar');
    function mostrarModalVacio() {
      vacioModal.style.display = 'flex';
    }
    function ocultarModalVacio() {
      vacioModal.style.display = 'none';
    }
    compraModalCerrar.addEventListener('click', ocultarModalCompra);
    vacioModalCerrar.addEventListener('click', ocultarModalVacio);

    document.getElementById('carrito-comprar').addEventListener('click', () => {
      if (carrito.length === 0) { mostrarModalVacio(); return; }
      
      mostrarModalCompra();
      iniciarSeguimiento(); // Inicia la simulaci√≥n de env√≠o

      carrito.length = 0;
      renderCarrito();
      carritoPanel.classList.remove('open');
    });

    function iniciarSeguimiento() {
      seguimientoFlotante.style.display = 'flex';
      const fases = document.querySelectorAll('.seguimiento-fase');
      
      // Resetear estados
      fases.forEach(f => f.classList.remove('completed'));

      let faseActual = 0;
      const intervalo = setInterval(() => {
        if (faseActual < fases.length) {
          fases[faseActual].classList.add('completed');
          faseActual++;
          // Si es la √∫ltima fase, mostrar recomendaciones
          if (faseActual === fases.length) {
            setTimeout(() => {
              document.getElementById('seguimiento-recomendaciones').classList.remove('hidden');
            }, 500); // Peque√±o delay para que se vea la animaci√≥n
          }
        } else {
          clearInterval(intervalo);
        }
      }, 3000); // 3 segundos por fase
    }

    function abrirDetalleDesdeRecomendacion(tipo, identificador) {
      seguimientoPanel.classList.remove('open'); // Cierra el panel de seguimiento
      irAComprasDesdeDestacado(tipo === 'individual' ? 'coleccion' : 'relojes', identificador);
    }

    // helper de seguridad XSS muy simple para nombres
    function escapeHtml(text) {
      return (text+'').replace(/[&<>"']/g, (m) => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
    }

    /**********************
     * Inicializaci√≥n: asegurar que filtros y cart badge est√©n bien
     **********************/
    renderCarrito();

    /**********************
     * Acciones extra
     **********************/
    // si el usuario hace click en la imagen de colecci√≥n, desplazarse a las tarjetas de colecci√≥n
    function scrollToCollection() {
      // activar filtro coleccion (bot√≥n)
      document.querySelector('.filtro-btn.active')?.classList.remove('active');
      const btnColeccion = document.querySelector('.filtro-btn[data-filter="coleccion"]');
      if (btnColeccion) btnColeccion.classList.add('active');

      // mostrar solo productos de la colecci√≥n
      document.querySelectorAll('.producto').forEach(prod => {
        prod.style.display = prod.dataset.category === 'coleccion' ? '' : 'none';
      });

      // mostrar cat√°logo (por si estaba oculto) y hacer scroll al cat√°logo
      const catalogo = document.getElementById('catalogo');
      if (catalogo) {
        catalogo.style.display = 'grid';
        setTimeout(()=>{ catalogo.scrollIntoView({behavior:'smooth'}); }, 50);
      }
    }

    // permitir cerrar detalle con ESC (oculta tanto compartido como individuales)
    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        ocultarTodosDetalles();
        const catalogo = document.getElementById('catalogo');
        if (catalogo) catalogo.style.display = 'grid';
        cerrarZoom();
        carritoPanel.classList.remove('open');
        seguimientoPanel.classList.remove('open');
        document.getElementById('search-bar').classList.remove('visible');
      }
    });

    /**********************
     * Destacados -> ir a secci√≥n de compras (cat√°logo filtrado)
     **********************/
    function irAComprasDesdeDestacado(categoria, nombreBuscado) {
      // filtra seg√∫n categor√≠a
      document.querySelector('.filtro-btn.active')?.classList.remove('active');
      const btn = document.querySelector(`.filtro-btn[data-filter="${categoria}"]`) || document.querySelector('.filtro-btn[data-filter="all"]');
      if (btn) btn.classList.add('active');
      document.querySelectorAll('.producto').forEach(prod => {
        const matchCat = (categoria === 'all' || prod.dataset.category === categoria);
        prod.style.display = matchCat ? '' : 'none';
      });
      const catalogo = document.getElementById('catalogo');
      if (catalogo) {
        catalogo.style.display = 'grid';
        catalogo.scrollIntoView({behavior:'smooth'});
      }
      // si se pasa un nombre, intenta abrir su detalle despu√©s de un peque√±o delay
      if (nombreBuscado) {
        // Si es un ID de detalle individual
        if (nombreBuscado.startsWith('detalle-')) {
          mostrarDetalle(nombreBuscado);
        } else { // Si es un nombre para el detalle compartido
          setTimeout(() => {
            const card = Array.from(document.querySelectorAll('.producto')).find(p => p.textContent.includes(nombreBuscado));
            if (card) card.click();
          }, 200);
        }
      }
    }

    // listeners en tarjetas destacadas
    document.getElementById('dest-1').addEventListener('click', () => irAComprasDesdeDestacado('coleccion', 'Aurora'));
    document.getElementById('dest-2').addEventListener('click', () => irAComprasDesdeDestacado('relojes', 'Reloj Cl√°sico'));
    document.getElementById('dest-3').addEventListener('click', () => irAComprasDesdeDestacado('coleccion', 'Sol'));

    /**********************
     * ZOOM DE IMAGEN
     **********************/
    const zoomModal = document.getElementById('zoom-modal');
    const zoomImg = document.getElementById('zoom-img');

    function abrirZoom(src) {
      if (zoomModal && zoomImg) {
        zoomImg.src = src;
        zoomModal.style.display = 'flex';
      }
    }

    function cerrarZoom() {
      if (zoomModal) {
        zoomModal.style.display = 'none';
      }
    }

    // Asignar evento de click a todas las im√°genes que pueden ser ampliadas
    document.querySelectorAll('.detalle .foto img, .detalle .galeria img').forEach(img => {
      img.addEventListener('click', (e) => {
        e.stopPropagation(); // Evita que el click se propague al fondo del modal
        abrirZoom(e.target.src);
      });
    });

    /**********************
     * B√öSQUEDA
     **********************/
    const searchIcon = document.getElementById('search-icon');
    const searchBar = document.getElementById('search-bar');
    const searchInput = document.getElementById('search-input');
    const closeSearchBtn = document.getElementById('close-search');

    searchIcon.addEventListener('click', () => {
      searchBar.classList.add('visible');
      searchInput.focus();
    });

    closeSearchBtn.addEventListener('click', () => {
      searchBar.classList.remove('visible');
      searchInput.value = '';
      // Resetear filtros y mostrar todos los productos
      document.querySelectorAll('.producto').forEach(prod => prod.style.display = '');
    });

    searchInput.addEventListener('input', (e) => {
      const searchTerm = e.target.value.toLowerCase().trim();
      document.querySelectorAll('.producto').forEach(prod => {
        const nombre = prod.querySelector('h3')?.textContent.toLowerCase() || '';
        const categoria = prod.dataset.category?.toLowerCase() || '';
        const isVisible = nombre.includes(searchTerm) || categoria.includes(searchTerm);
        prod.style.display = isVisible ? '' : 'none';
      });
    });

    searchInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault(); // Evita cualquier acci√≥n por defecto del Enter
        // Encuentra los productos que est√°n actualmente visibles
        const visibleProducts = Array.from(document.querySelectorAll('.producto')).filter(p => p.style.display !== 'none');
        // Si hay exactamente un resultado, abre su detalle
        if (visibleProducts.length === 1) {
          visibleProducts[0].click(); // Simula un clic para abrir el detalle
          closeSearchBtn.click(); // Cierra la barra de b√∫squeda
        }
      }
    });
    // END script
  </script>

</body>
</html>
