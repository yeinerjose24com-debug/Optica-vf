<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>VF Optical | Cat√°logo</title>
  <style>
    /* Reset + tipograf√≠a */
    * { box-sizing: border-box; margin:0; padding:0; font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
    :root {
      --oro: #D4AF37;
      --negro: #0b0b0b;
      --fondo: #fbfbfb;
      --card-bg: #fff;
    }
  body { background: var(--fondo); color:var(--negro); -webkit-font-smoothing:antialiased; overflow-x:hidden; }
  html { scroll-behavior: smooth; }

    /* Header */
    header { background: var(--negro); padding:18px 24px; display:flex; align-items:center; gap:18px; justify-content:space-between; position:relative; z-index:30;}
    header .brand { display:flex; align-items:center; gap:12px; color:var(--oro); }
    header img.logo { width:85px; height:85px; object-fit:cover; border-radius:50%; border:4px solid var(--oro); }
    header nav.top { display:flex; gap:18px; align-items:center; font-weight:600; color:#fff; }
    header nav.top a { color:#fff; text-decoration:none; font-size:14px; letter-spacing:0.6px; padding:8px 10px; border-radius:8px; }
    header nav.top a:hover { background: rgba(255,255,255,0.04); }
    .header-icons { display:flex; align-items:center; gap:12px; }
    .icon-btn { width:40px; height:40px; border-radius:50%; background:var(--negro); border:2px solid rgba(255,255,255,0.06); display:flex; align-items:center; justify-content:center; color:var(--oro); font-size:18px; cursor:pointer; position:relative; }
    .icon-badge { position:absolute; top:-6px; right:-6px; background:var(--oro); color:#000; font-weight:700; font-size:12px; padding:2px 6px; border-radius:999px; }

    /* Decoracion lateral (moda1) */
    .decoracion { position:fixed; left:12px; top:120px; width:140px; z-index:20; display:block; }
    /* Hice la imagen m√°s flexible para "cubrir" mejor el contenedor sin recortarlo mal */
    .decoracion img { width:100%; height:60vh; max-height:520px; object-fit:cover; border-radius:12px; box-shadow:0 8px 30px rgba(0,0,0,0.12); }

    /* Hero video (gif-like) */
    .hero { background: #fff; display:flex; align-items:center; justify-content:center; padding:18px 0; border-bottom:1px solid #eee; }
    .hero video, .hero img { max-width:1200px; width:100%; height:420px; object-fit:cover; border-radius:8px; box-shadow:0 8px 30px rgba(0,0,0,0.06); }

    /* Colecci√≥n nueva */
    .coleccion-nueva { display:flex; gap:30px; align-items:center; justify-content:center; padding:48px 20px; max-width:1200px; margin:0 auto; background:transparent; }
    .coleccion-nueva .foto { width:420px; height:520px; border-radius:14px; overflow:hidden; box-shadow:0 10px 30px rgba(0,0,0,0.08); cursor:pointer; }
    .coleccion-nueva .foto img { width:100%; height:100%; object-fit:cover; display:block; }
    .coleccion-nueva .texto { max-width:560px; }
    .coleccion-nueva h2 { font-size:32px; margin-bottom:10px; color:var(--negro); }
    .coleccion-nueva p { color:#555; line-height:1.5; }

    /* Destacados (nueva secci√≥n) */
    .destacados { max-width:1200px; margin:30px auto; padding:20px; display:flex; gap:18px; justify-content:center; }
  .destacado-card { background:var(--card-bg); border-radius:12px; padding:18px; width:320px; box-shadow:0 8px 20px rgba(0,0,0,0.06); text-align:center; cursor:pointer; }
    .destacado-card img { width:100%; height:220px; object-fit:cover; border-radius:8px; margin-bottom:12px; }
    .destacado-card.highlight { box-shadow: 0 18px 40px rgba(212,175,55,0.18), 0 6px 24px rgba(0,0,0,0.08); transform: translateY(-6px); border: 2px solid var(--oro); }
    @keyframes destHighlight {
      0% { box-shadow: 0 6px 18px rgba(0,0,0,0.06); transform: translateY(0); }
      30% { box-shadow: 0 20px 50px rgba(212,175,55,0.18); transform: translateY(-8px); }
      100% { box-shadow: 0 8px 20px rgba(0,0,0,0.06); transform: translateY(0); }
    }

    /* Filters */
    .filtros { display:flex; gap:12px; justify-content:center; padding:26px 20px; background:var(--card-bg); border-bottom:1px solid #eee; position:relative; z-index:10; }
    .filtros button { background:transparent; border:2px solid transparent; padding:10px 18px; border-radius:10px; cursor:pointer; font-weight:600; letter-spacing:0.4px; transition:all .22s; }
    .filtros button.active { background:var(--negro); color:#fff; border-color:var(--oro); box-shadow:0 6px 18px rgba(0,0,0,0.06); }

    /* Cat√°logo estilo revista (grid amplio) */
    .catalogo { display:grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap:32px; padding:24px 50px 80px; max-width:1300px; margin:0 auto; }
    .producto {
      position:relative; overflow:hidden; border-radius:14px; background:#fafafa; cursor:pointer;
      transition:transform .35s ease, box-shadow .35s ease;
      display:flex; flex-direction:column;
    }
    .producto:hover { transform:translateY(-8px); box-shadow:0 18px 40px rgba(0,0,0,0.12); }
    .producto .imgwrap { width:100%; height:320px; background:#fff; display:flex; align-items:center; justify-content:center; }
    .producto img { max-width:100%; max-height:100%; object-fit:cover; display:block; }
    .producto .info-card { padding:14px; display:flex; justify-content:space-between; align-items:center; gap:10px; }
    .producto .info-card h3 { margin:0; font-size:18px; }
    .producto .info-card p { margin:0; color:var(--oro); font-weight:700; }

    /* overlay info en la imagen (elegante) */
    .producto-info {
      position:absolute; left:14px; right:14px; bottom:14px; background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.46) 100%);
      color:#fff; padding:14px; border-radius:10px; display:flex; justify-content:space-between; align-items:center;
      gap:10px;
    }
    .producto-info .meta { text-align:left; }
    .producto-info h3 { font-size:18px; font-weight:600; margin-bottom:6px; letter-spacing:0.3px; }
    .producto-info p { color:var(--oro); font-weight:700; font-size:15px; }

    /* Vista detalle tipo ficha */
    .detalle-wrap { display:none; padding:40px; max-width:1200px; margin:0 auto 60px; background:var(--card-bg); border-radius:12px; box-shadow:0 12px 40px rgba(0,0,0,0.06); }
    .detalle { display:grid; grid-template-columns:1fr 420px; gap:28px; align-items:start; }
    .detalle .galeria { display:flex; gap:10px; }
    .detalle .galeria img { width:calc(50% - 5px); height:320px; object-fit:cover; border-radius:8px; }
    .detalle .foto { background:#f6f6f6; padding:12px; border-radius:10px; display:flex; align-items:center; justify-content:center; }
    /* Hacemos las im√°genes del detalle clickables para el zoom */
    .detalle .foto img, .detalle .galeria img {
      cursor: zoom-in;
    }
    .detalle .foto img { width:100%; height:auto; max-height:640px; object-fit:contain; border-radius:8px; }
    .detalle .info h2 { font-size:28px; margin-bottom:8px; font-weight:700; }
    .detalle .info .precio { color:var(--oro); font-weight:800; font-size:20px; margin:10px 0 12px; }
    .detalle .info .specs { display:flex; flex-direction:column; gap:8px; margin-bottom:12px; color:#333; }
    .btn { padding:12px 18px; border-radius:8px; font-weight:700; cursor:pointer; border:none; }
    .btn.primary { background:var(--oro); color:var(--negro); }
    .btn.ghost { background:transparent; border:2px solid var(--oro); color:var(--negro); }
    .volver { margin-top:18px; color:#666; cursor:pointer; text-decoration:underline; background:none; border:none; font-weight:600; }

    /* Overlay para el carrito en m√≥vil */
    .carrito-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.4);
      z-index: 110;
      opacity: 0;
      visibility: hidden;
      transition: opacity .3s, visibility .3s;
    }
    .carrito-overlay.visible {
      opacity: 1;
      visibility: visible;
    }

    /* Carrito lateral */
    .carrito-panel {
      position:fixed; top:0; right:-420px; width:380px; height:100vh; background:#fff; box-shadow:-8px 0 30px rgba(0,0,0,0.15);
      transition: right .36s cubic-bezier(.2,.9,.2,1);
      z-index:120;
      display:flex;
      flex-direction:column;
    }
    .carrito-panel.open { right: 0; }
    .carrito-header { background:var(--negro); color:#fff; padding:18px; display:flex; justify-content:space-between; align-items:center; }
    .carrito-items { padding:16px; overflow:auto; flex:1; }
    .carrito-item { display:flex; gap:10px; align-items:center; border-bottom:1px solid #eee; padding:12px 0; }
    .carrito-item img { width:64px; height:64px; object-fit:cover; border-radius:8px; }
    .carrito-item .meta { flex:1; }
    .carrito-item .meta strong { display:block; font-size:15px; margin-bottom:6px; }
    .carrito-item .meta small { color:#777; }
    .carrito-item .acciones { display:flex; flex-direction:column; gap:6px; align-items:flex-end; }
    .carrito-total { padding:16px; border-top:1px solid #eee; }
    .carrito-total .total { font-weight:800; font-size:18px; margin-bottom:10px; }
    .btn.checkout { width:100%; padding:12px; background:var(--negro); color:#fff; border-radius:8px; cursor:pointer; font-weight:800; border:2px solid var(--oro); }

    /* Modal para zoom de imagen */
    .zoom-modal { position:fixed; z-index:400; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.85); display:flex; align-items:center; justify-content:center; }
    .zoom-modal-content { max-width:90%; max-height:90%; object-fit:contain; }
    .zoom-close { position:absolute; top:20px; right:35px; color:#fff; font-size:40px; font-weight:bold; cursor:pointer; }

    /* Estilos para el link de Instagram */
    .contacto-social {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
    }
    .contacto-social img {
      width: 24px;
      height: 24px;
    }
    /* Misc */
    .hidden { display:none !important; }
    @media (max-width:1100px) {
      .producto .imgwrap{height:280px;}
      .coleccion-nueva { flex-direction:column; align-items:center; padding:34px 14px; }
      .coleccion-nueva .foto { width:92%; height:420px; }
      .decoracion { display:none; }
      .carrito-panel { width: 90%; max-width: 380px; right: -100%; }
      .detalle { grid-template-columns:1fr; gap: 20px; }
      .detalle .galeria {
        order: -1; /* Mueve la galer√≠a arriba de la info en m√≥vil */
        height: 150px; /* Altura m√°s peque√±a para las miniaturas */
      }
      .destacados {
        flex-direction: column; /* Apila los destacados en m√≥vil */
        align-items: center;
      }
      /* Correcci√≥n para la vista de detalle en m√≥vil */
      .detalle .info {
        display: flex;
        flex-direction: column;
      }
    }
  </style>
</head>
<body>

  
  <!-- HEADER -->
  <header>
    <div class="brand">
      <img src="static/logo-1.png" class="logo" alt="VF Optical">
      <div style="color:var(--oro); font-weight:700; letter-spacing:2px;">VF OPTICAL</div>
    </div>

    <nav class="top" aria-label="Navegaci√≥n principal">
      <!-- ENLACE COLECCI√ìN ahora llama a scrollToCollection para filtrar y hacer scroll correctamente -->
      <a href="#coleccion" id="link-coleccion">Colecci√≥n</a>
      <a href="#destacados">Destacados</a>
      <a href="#catalogo">Cat√°logo</a>
      <a href="#contacto">Contacto</a>
    </nav>

    <div class="header-icons">
      <div class="icon-btn" title="Buscar">üîç</div>
      <div id="cart-icon" class="icon-btn" title="Ver carrito" aria-label="Ver carrito">
        üõí
        <div id="cart-count" class="icon-badge" style="display:none;">0</div>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero" aria-hidden="false">
    <video src="static/video1.mp4" autoplay muted loop playsinline preload="auto" poster="static/video1.mp4"></video>
  </section>

  <!-- COLECCI√ìN NUEVA -->
  <section id="coleccion" class="coleccion-nueva" aria-labelledby="coleccion-title">
    <div class="foto" onclick="scrollToCollection();">
      <!-- reemplaza por la imagen del modelo -->
      <img src="static/moda2.jpg" alt="Nueva Colecci√≥n - modelo">
    </div>
    <div class="texto">
      <h2 id="coleccion-title">Colecci√≥n Nueva</h2>
      <p>Descubre la nueva colecci√≥n de gafas: piezas exclusivas pensadas para la temporada. Haz clic en la imagen para ver los productos de esta colecci√≥n.</p>
      <p style="margin-top:18px;color:#555;">Al seleccionar un producto de la colecci√≥n se abrir√° la vista de detalle con m√°s im√°genes y opci√≥n de a√±adir al carrito.</p>
      <!-- Enlaces r√°pidos hacia los art√≠culos destacados -->
      <div style="margin-top:14px;">
        <strong style="display:block;margin-bottom:8px;color:#222;">Ir a destacados:</strong>
        <div style="display:flex;gap:8px;flex-wrap:wrap;">
          <a href="#dest-1" style="text-decoration:none;padding:8px 12px;border-radius:8px;border:1px solid var(--oro);color:var(--negro);background:#fff;font-weight:700;">Gafa Aurora</a>
          <a href="#dest-2" style="text-decoration:none;padding:8px 12px;border-radius:8px;border:1px solid var(--oro);color:var(--negro);background:#fff;font-weight:700;">Reloj Cl√°sico</a>
          <a href="#dest-3" style="text-decoration:none;padding:8px 12px;border-radius:8px;border:1px solid var(--oro);color:var(--negro);background:#fff;font-weight:700;">Vintage Sol</a>
        </div>
      </div>
    </div>
  </section>

  <!-- DESTACADOS -->
  <section id="destacados" class="destacados" aria-label="Productos destacados">
    <div id="dest-1" class="destacado-card">
      <img src="static/producto7.avif" alt="Destacado 1">
      <h4 style="margin-top:10px;">Gafa Aurora</h4>
      <p style="color:var(--oro); font-weight:700;">$150.000</p>
    </div>
    <div id="dest-2" class="destacado-card">
      <img src="static/rolex1.webp" alt="Destacado 2">
      <h4 style="margin-top:10px;">Reloj Cl√°sico</h4>
      <p style="color:var(--oro); font-weight:700;">$220.000</p>
    </div>
    <div id="dest-3" class="destacado-card">
      <img src="static/producto9.avif" alt="Destacado 3">
      <h4 style="margin-top:10px;">Vintage Sol</h4>
      <p style="color:var(--oro); font-weight:700;">$180.000</p>
    </div>
  </section>

  <!-- FILTROS -->
  <div class="filtros" role="toolbar" aria-label="Filtrar productos">
    <button class="filtro-btn active" data-filter="all">Todos</button>
    <button class="filtro-btn" data-filter="gafas">Gafas</button>
    <button class="filtro-btn" data-filter="relojes">Relojes</button>
    <button class="filtro-btn" data-filter="coleccion">Colecci√≥n</button>
  </div>

  <!-- CAT√ÅLOGO (incluye tus productos originales + nueva colecci√≥n) -->
  <main id="catalogo" class="catalogo" aria-live="polite">

    <!-- --- Productos existentes (mantengo tus originales exactamente) --- -->

    <!-- GAFAS -->
    <article class="producto" data-category="gafas"
      onclick="abrirDetalleFromEl(this, {nombre:'DAVID', montura:'Pulido Plateado', lentes:'Azul/Gris', precio:'$150.000', src:'static/producto_1.png', desc:'Montura met√°lica pulida, delicada y ligera. Lentes con gradiente azul.'})">
      <div class="imgwrap"><img src="static/producto_1.png" alt="DAVID - Gafa Pulido Plateado"></div>
      <div class="producto-info">
        <div class="meta">
          <h3>DAVID</h3>
          <p>$150.000</p>
        </div>
        <div class="cta-mini" title="Ver detalle">‚û§</div>
      </div>
    </article>

    <article class="producto" data-category="gafas"
      onclick="abrirDetalleFromEl(this, {nombre:'RUB√âN', montura:'Montura PVC', lentes:'Negro', precio:'$120.000', src:'static/producto_2.jpg', desc:'Dise√±o urbano y resistente, ideal para uso diario.'})">
      <div class="imgwrap"><img src="static/producto_2.jpg" alt="RUB√âN"></div>
      <div class="producto-info">
        <div class="meta">
          <h3>RUB√âN</h3>
          <p>$120.000</p>
        </div>
        <div>‚û§</div>
      </div>
    </article>

    <!-- RELOJ -->
    <article class="producto" data-category="relojes"
      onclick="abrirDetalleFromEl(this, {nombre:'Reloj Cl√°sico', montura:'Acero Inoxidable', lentes:'N/A', precio:'$220.000', src:'static/rolex1.webp', desc:'Movimiento suizo, correa de cuero y caja resistente al agua.'})">
      <div class="imgwrap"><img src="static/rolex1.webp" alt="Reloj Cl√°sico"></div>
      <div class="producto-info">
        <div class="meta">
          <h3>Reloj Cl√°sico</h3>
          <p>$220.000</p>
        </div>
        <div>‚û§</div>
      </div>
    </article>

    <article class="producto" data-category="relojes"
      onclick="abrirDetalleFromEl(this, {nombre:'Reloj Minimal', montura:'Acero Cepillado', lentes:'N/A', precio:'$240.000', src:'static/rolex2.webp', desc:'Est√©tica minimalista, ideal para looks formales.'})">
      <div class="imgwrap"><img src="static/rolex2.webp" alt="Reloj Minimal"></div>
      <div class="producto-info">
        <div class="meta">
          <h3>Reloj Minimal</h3>
          <p>$240.000</p>
        </div>
        <div>‚û§</div>
      </div>
    </article>

    <!-- M√°s items de ejemplo -->
    <article class="producto" data-category="gafas"
      onclick="abrirDetalleFromEl(this, {nombre:'VINTAGE GOLD', montura:'Dorado', lentes:'Ambar', precio:'$180.000', src:'static/producto_3.jpg', desc:'Dise√±o vintage con acabado dorado.'})">
      <div class="imgwrap"><img src="static/producto_3.jpg" alt="Vintage Gold"></div>
      <div class="producto-info">
        <div class="meta">
          <h3>VINTAGE GOLD</h3>
          <p>$180.000</p>
        </div>
        <div>‚û§</div>
      </div>
    </article>

    <!-- --- Nueva colecci√≥n: gafas (data-category="coleccion") --- -->
    <article class="producto" data-category="coleccion"
      onclick="abrirDetalleFromEl(this, {nombre:'Colecci√≥n - Aurora', montura:'Acabado Dorado', lentes:'Gradiente Azul', precio:'$210.000', src:'static/producto7.1.avif', extraImgs:['static/producto7.1.avif','static/producto7.2.avif'], desc:'Gafa premium de la nueva colecci√≥n Aurora.'})">
      <div class="imgwrap"><img src="static/producto7.1.avif" alt="Coleccion Aurora"></div>
      <div class="info-card">
        <h3>Colecci√≥n - Aurora</h3>
        <p>$210.000</p>
      </div>
    </article>

    <article class="producto" data-category="coleccion"
      onclick="abrirDetalleFromEl(this, {nombre:'Colecci√≥n - N√©bula', montura:'Negro Mate', lentes:'Polarizado', precio:'$195.000', src:'static/producto8.1.avif', extraImgs:['static/producto8.1.avif','static/producto8.2.avif'], desc:'Dise√±o urbano y elegante, colecci√≥n N√©bula.'})">
      <div class="imgwrap"><img src="static/producto8.1.avif" alt="Coleccion Nebula"></div>
      <div class="info-card">
        <h3>Colecci√≥n - N√©bula</h3>
        <p>$195.000</p>
      </div>
    </article>

    <article class="producto" data-category="coleccion"
      onclick="abrirDetalleFromEl(this, {nombre:'Colecci√≥n - Sol', montura:'Dorado Brillante', lentes:'Ambar', precio:'$230.000', src:'static/producto9.1.avif', extraImgs:['static/producto9.1.avif','static/producto9.2.avif'], desc:'Pieza ic√≥nica con acabado dorado.'})">
      <div class="imgwrap"><img src="static/producto9.1.avif" alt="Coleccion Sol"></div>
      <div class="info-card">
        <h3>Colecci√≥n - Sol</h3>
        <p>$230.000</p>
      </div>
    </article>

  </main>

  <!-- VISTA DETALLE (se usa para todos los productos compartido) -->
  <section id="detalle-wrap" class="detalle-wrap" aria-hidden="true">
    <div class="detalle" role="dialog" aria-modal="true">
      <div class="foto">
        <img id="detalle-img" src="" alt="Detalle producto">
      </div>

      <div class="info">
        <h2 id="detalle-nombre">Nombre</h2>
        <div class="precio" id="detalle-precio">$0</div>

        <!-- Galer√≠a extra (para nueva colecci√≥n con 2 im√°genes) -->
        <div class="galeria hidden" id="detalle-galeria">
          <img id="gal-1" src="" alt="Galer√≠a 1">
          <img id="gal-2" src="" alt="Galer√≠a 2">
        </div>

        <div class="specs">
          <div><strong>Montura:</strong> <span id="detalle-montura"></span></div>
          <div><strong>Lentes:</strong> <span id="detalle-lentes"></span></div>
          <div><strong>Disponibilidad:</strong> <span id="detalle-dispo">Consultar tienda</span></div>
        </div>

        <p id="detalle-desc" style="color:#444;">Descripci√≥n breve del producto y sus materiales.</p>

        <div class="cta" style="margin-top:10px;">
          <button class="btn primary" id="btn-add">A√±adir al carrito</button>
          <button class="btn ghost" id="btn-buy">Comprar ahora</button>
        </div>

        <button class="volver" id="volver-catalogo">Volver al cat√°logo</button>
      </div>
    </div>
  </section>

 <!-- DETALLES INDIVIDUALES DE LA NUEVA COLECCI√ìN -->
<!-- DETALLE AURORA -->
<section id="detalle-aurora" class="detalle-wrap hidden" aria-hidden="true">
  <div class="detalle">
    <div class="foto">
      <img src="static/producto7.avif" alt="Colecci√≥n Aurora principal">
    </div>
    <div class="info">
      <h2>Colecci√≥n - Aurora</h2>
      <div class="precio">$210.000</div>
      <div class="galeria">
        <img src="static/producto7.1.avif" alt="Aurora vista lateral">
        <img src="static/producto7.2.avif" alt="Aurora detalle montura">
      </div>
      <div class="specs">
        <div><strong>Montura:</strong> Acabado Dorado</div>
        <div><strong>Lentes:</strong> Gradiente Azul</div>
        <div><strong>Disponibilidad:</strong> En tienda y online</div>
      </div>
      <p>Gafa premium de la colecci√≥n Aurora. Su estructura met√°lica con tonos dorados ofrece un toque elegante con lentes degradados en azul para un look sofisticado.</p>
      <div style="margin-top:10px;">
        <button class="btn primary" onclick="agregarAlCarrito({nombre:'Colecci√≥n Aurora',precioText:'$210.000',precioVal:210000,img:'static/producto7.1.avif'})">A√±adir al carrito</button>
        <button class="btn ghost" onclick="alert('Compra inmediata de Aurora')">Comprar ahora</button>
      </div>
      <button class="volver" onclick="volverCatalogo('detalle-aurora')">Volver al cat√°logo</button>
    </div>
  </div>
</section>

<!-- DETALLE N√âBULA -->
<section id="detalle-nebula" class="detalle-wrap hidden" aria-hidden="true">
  <div class="detalle">
    <div class="foto">
      <img src="static/producto8.avif" alt="Colecci√≥n N√©bula principal">
    </div>
    <div class="info">
      <h2>Colecci√≥n - N√©bula</h2>
      <div class="precio">$195.000</div>
      <div class="galeria">
        <img src="static/producto8.1.avif" alt="N√©bula vista lateral">
        <img src="static/producto8.2.avif" alt="N√©bula detalle montura">
      </div>
      <div class="specs">
        <div><strong>Montura:</strong> Negro Mate</div>
        <div><strong>Lentes:</strong> Polarizado</div>
        <div><strong>Disponibilidad:</strong> Online</div>
      </div>
      <p>Dise√±o moderno con montura en negro mate y lentes polarizados. Ideal para quienes buscan elegancia con protecci√≥n total.</p>
      <div style="margin-top:10px;">
        <button class="btn primary" onclick="agregarAlCarrito({nombre:'Colecci√≥n N√©bula',precioText:'$195.000',precioVal:195000,img:'static/producto8.1.avif'})">A√±adir al carrito</button>
        <button class="btn ghost" onclick="alert('Compra inmediata de N√©bula')">Comprar ahora</button>
      </div>
      <button class="volver" onclick="volverCatalogo('detalle-nebula')">Volver al cat√°logo</button>
    </div>
  </div>
</section>

<!-- DETALLE SOL -->
<section id="detalle-sol" class="detalle-wrap hidden" aria-hidden="true">
  <div class="detalle">
    <div class="foto">
      <img src="static/producto9.avif" alt="Colecci√≥n Sol principal">
    </div>
    <div class="info">
      <h2>Colecci√≥n - Sol</h2>
      <div class="precio">$230.000</div>
      <div class="galeria">
        <img src="static/producto9.1.avif" alt="Sol vista lateral">
        <img src="static/producto9.2.avif" alt="Sol detalle montura">
      </div>
      <div class="specs">
        <div><strong>Montura:</strong> Dorado Brillante</div>
        <div><strong>Lentes:</strong> √Åmbar</div>
        <div><strong>Disponibilidad:</strong> En tienda</div>
      </div>
      <p>Pieza ic√≥nica de la nueva colecci√≥n con acabado dorado brillante. Inspirada en la luz y el color del verano.</p>
      <div style="margin-top:10px;">
        <button class="btn primary" onclick="agregarAlCarrito({nombre:'Colecci√≥n Sol',precioText:'$230.000',precioVal:230000,img:'static/producto9.1.avif'})">A√±adir al carrito</button>
        <button class="btn ghost" onclick="alert('Compra inmediata de Sol')">Comprar ahora</button>
      </div>
      <button class="volver" onclick="volverCatalogo('detalle-sol')">Volver al cat√°logo</button>
    </div>
  </div>
</section>

  <!-- OVERLAY PARA CARRITO EN M√ìVIL -->
  <div id="carrito-overlay" class="carrito-overlay"></div>

  <!-- CARRITO LATERAL -->
  <aside id="carrito-panel" class="carrito-panel" aria-hidden="true">
    <div class="carrito-header">
      <div style="font-weight:800; font-size:16px;">Tu carrito</div>
      <button id="close-carrito" style="background:none;border:none;color:#fff;font-size:20px;cursor:pointer;">‚úñ</button>
    </div>

    <div class="carrito-items" id="carrito-items">
      <div class="carrito-vacio" id="carrito-vacio">A√∫n no hay productos.</div>
    </div>

    <div class="carrito-total" id="carrito-total">
      <div class="total">Total: <span id="carrito-total-valor">$0</span></div>
      <button class="btn checkout" id="carrito-comprar">Finalizar compra</button>
    </div>
  </aside>

  <!-- CONTACTO -->
  <section id="contacto" style="max-width:1200px;margin:40px auto;padding:20px;background:#fff;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,0.06);">
    <h2 style="margin-bottom:10px;">Contacto</h2>
    <p>Correo: <a href="mailto:vfoptical@gmail.com">vfoptical@gmail.com</a></p>
    <p>Tel√©fono: <a href="tel:+573126182345">+57 3126182345</a></p>
    <div class="contacto-social">
      <a href="https://www.instagram.com/vfoptical25/" target="_blank" rel="noopener noreferrer" style="display:flex; align-items:center; gap: 8px; text-decoration: none; color: var(--negro); font-weight: 600;">
        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram"> S√≠guenos en Instagram
      </a>
    </div>
  </section>

  <!-- Modal de confirmaci√≥n de compra -->
  <div id="compra-modal" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.4);z-index:300;">
    <div style="background:#fff;padding:20px 24px;border-radius:10px;min-width:280px;max-width:90%;text-align:center;box-shadow:0 12px 40px rgba(0,0,0,0.2);">
      <div style="font-weight:800;font-size:18px;margin-bottom:8px;">Compra realizada</div>
      <div style="color:#444;margin-bottom:14px;">Tu producto se compr√≥ correctamente.</div>
      <button id="compra-modal-cerrar" class="btn primary" style="min-width:120px;">Cerrar</button>
    </div>
  </div>

  <!-- Modal para zoom de imagen -->
  <div id="zoom-modal" class="zoom-modal" style="display:none;" onclick="cerrarZoom()">
    <span class="zoom-close" onclick="cerrarZoom()">&times;</span>
    <img class="zoom-modal-content" id="zoom-img">
  </div>

  <script>
    /**********************
     * FILTROS
     **********************/
    const filtroBtns = document.querySelectorAll('.filtro-btn');
    filtroBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelector('.filtro-btn.active')?.classList.remove('active');
        btn.classList.add('active');
        const f = btn.dataset.filter;
        document.querySelectorAll('.producto').forEach(prod => {
          prod.style.display = (f === 'all' || prod.dataset.category === f) ? '' : 'none';
        });
        // scroll suave al cat√°logo
        document.getElementById('catalogo')?.scrollIntoView({behavior:'smooth'});
      });
    });

    /**********************
     * NAV LINK a COLECCI√ìN
     **********************/
    // Evita comportamiento por defecto del enlace y usa nuestra funci√≥n estable
    document.getElementById('link-coleccion').addEventListener('click', (e) => {
      e.preventDefault();
      scrollToCollection();
    });

    /**********************
     * HELPER: Mostrar / Ocultar detalles
     **********************/
    function ocultarTodosDetalles() {
      // oculta vista detalle compartida
      const shared = document.getElementById('detalle-wrap');
      if (shared) {
        shared.style.display = 'none';
        shared.setAttribute('aria-hidden','true');
      }
      // oculta detalles individuales
      ['detalle-aurora','detalle-nebula','detalle-sol'].forEach(id => {
        const el = document.getElementById(id);
        if (el) {
          el.classList.add('hidden');
          el.setAttribute('aria-hidden','true');
        }
      });
    }

    function mostrarDetalle(id) {
      ocultarTodosDetalles();
      // ocultar cat√°logo para dar foco al detalle
      const catalogo = document.getElementById('catalogo');
      if (catalogo) catalogo.style.display = 'none';
      const el = document.getElementById(id);
      if (el) {
        el.classList.remove('hidden');
        el.style.display = 'block';
        el.setAttribute('aria-hidden','false');
        // scroll al detalle seleccionado
        setTimeout(()=> el.scrollIntoView({ behavior: 'smooth' }), 50);
      }
    }

    function volverCatalogo(idToHide) {
      // oculta un detalle individual espec√≠fico (si aplica)
      if (idToHide) {
        const el = document.getElementById(idToHide);
        if (el) {
          el.classList.add('hidden');
          el.setAttribute('aria-hidden','true');
        }
      }
      // oculta el detalle compartido por si estaba abierto
      const shared = document.getElementById('detalle-wrap');
      if (shared) { shared.style.display = 'none'; shared.setAttribute('aria-hidden','true'); }
      // mostrar cat√°logo
      const catalogo = document.getElementById('catalogo');
      if (catalogo) catalogo.style.display = 'grid';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    /**********************
     * DETALLES DE PRODUCTO (reutilizable)
     **********************/
    function abrirDetalleFromEl(el, info) {
      // Si es parte de la nueva colecci√≥n, abrimos su detalle individual
      if (info && typeof info.nombre === 'string' && info.nombre.includes('Aurora')) {
        mostrarDetalle('detalle-aurora');
        return;
      } else if (info && typeof info.nombre === 'string' && info.nombre.includes('N√©bula')) {
        mostrarDetalle('detalle-nebula');
        return;
      } else if (info && typeof info.nombre === 'string' && info.nombre.includes('Sol')) {
        mostrarDetalle('detalle-sol');
        return;
      }

      // Si no pertenece a la colecci√≥n nueva, usa el detalle compartido anterior
      ocultarTodosDetalles();
      const shared = document.getElementById('detalle-wrap');
      if (shared) {
        abrirDetalle(info);
        shared.style.display = 'block';
        shared.setAttribute('aria-hidden','false');
        // scroll al detalle compartido
        setTimeout(()=> shared.scrollIntoView({ behavior: 'smooth' }), 50);
      }
    }

    function abrirDetalle({nombre, montura, lentes, precio, src, extraImgs = [], desc}) {
      // cargar datos en el detalle compartido
      const imgEl = document.getElementById('detalle-img'); // Aseg√∫rate que el src tenga el prefijo 'static/'
      if (imgEl) imgEl.src = src || '';

      document.getElementById('detalle-nombre').textContent = nombre || '';
      document.getElementById('detalle-montura').textContent = montura || '‚Äî';
      document.getElementById('detalle-lentes').textContent = lentes || '‚Äî';
      document.getElementById('detalle-precio').textContent = precio || '$0';
      document.getElementById('detalle-desc').textContent = desc || 'Sin descripci√≥n disponible.';

      // galer√≠a: si hay extraImgs (array con 2 rutas) mostrar galer√≠a
      const gal = document.getElementById('detalle-galeria');
      if (gal) {
        if (Array.isArray(extraImgs) && extraImgs.length >= 2) {
          gal.classList.remove('hidden');
          document.getElementById('gal-1').src = extraImgs[0];
          document.getElementById('gal-2').src = extraImgs[1];
        } else {
          gal.classList.add('hidden');
          document.getElementById('gal-1').src = '';
          document.getElementById('gal-2').src = '';
        }
      }

      // asignar comportamiento del bot√≥n a√±adir con la info actual
      const btnAdd = document.getElementById('btn-add');
      if (btnAdd) {
        btnAdd.onclick = () => {
          agregarAlCarrito({
            nombre: nombre,
            precioText: precio,
            precioVal: parsePrice(precio),
            img: src
          });
        };
      }

      // comprar ahora
      const btnBuy = document.getElementById('btn-buy');
      if (btnBuy) btnBuy.onclick = () => { alert('Iniciando compra de: ' + nombre); };
    }

    // Conectar bot√≥n "Volver al cat√°logo" del detalle compartido
    document.getElementById('volver-catalogo').addEventListener('click', () => {
      volverCatalogo();
    });

    // helper: parse price string like "$150.000" to numeric 150000
    function parsePrice(priceStr) {
      if (!priceStr) return 0;
      const nums = priceStr.toString().replace(/[^\d]/g,'');
      return nums ? parseInt(nums,10) : 0;
    }

    /**********************
     * CARRITO
     **********************/
    const carritoPanel = document.getElementById('carrito-panel');
    const carritoOverlay = document.getElementById('carrito-overlay');
    const carritoItemsEl = document.getElementById('carrito-items');
    const carritoTotalValorEl = document.getElementById('carrito-total-valor');
    const cartIcon = document.getElementById('cart-icon');
    const cartCountBadge = document.getElementById('cart-count');
    const carrito = []; // { nombre, precioText, precioVal, img }

    // abrir/cerrar carrito
    cartIcon.addEventListener('click', () => {
      carritoPanel.classList.toggle('open');
      carritoPanel.setAttribute('aria-hidden', carritoPanel.classList.contains('open') ? 'false' : 'true');
      if (carritoOverlay) carritoOverlay.classList.toggle('visible');
    });
    document.getElementById('close-carrito').addEventListener('click', () => {
      carritoPanel.classList.remove('open');
      if (carritoOverlay) carritoOverlay.classList.remove('visible');
    });
    // Cerrar tambi√©n al hacer clic en el overlay
    if (carritoOverlay) {
      carritoOverlay.addEventListener('click', () => {
        document.getElementById('close-carrito').click();
      });
    }

    // agregar al carrito
    function agregarAlCarrito(item) {
      carrito.push(item);
      renderCarrito();
      // abrir carrito autom√°ticamente
      carritoPanel.classList.add('open');
      if (carritoOverlay) carritoOverlay.classList.add('visible');
      cartCountBadge.style.display = 'block';
      cartCountBadge.textContent = carrito.length;
    }

    // render carrito
    function renderCarrito() {
      if (carrito.length === 0) {
        carritoItemsEl.innerHTML = '<div class="carrito-vacio" id="carrito-vacio">A√∫n no hay productos.</div>';
        carritoTotalValorEl.textContent = '$0';
        cartCountBadge.style.display = 'none';
        return;
      }

      carritoItemsEl.innerHTML = '';
      let total = 0;
      carrito.forEach((it, idx) => {
        total += it.precioVal || 0;
        const itemEl = document.createElement('div');
        itemEl.className = 'carrito-item';
        itemEl.innerHTML = `
          <img src="${it.img || 'static/producto_1.png'}" alt="${escapeHtml(it.nombre)}">
          <div class="meta">
            <strong>${escapeHtml(it.nombre)}</strong>
            <small>${escapeHtml(it.precioText)}</small>
          </div>
          <div class="acciones">
            <button onclick="eliminarItem(${idx})" aria-label="Eliminar">Eliminar</button>
          </div>
        `;
        carritoItemsEl.appendChild(itemEl);
      });

      carritoTotalValorEl.textContent = '$' + total.toLocaleString();
      cartCountBadge.style.display = 'block';
      cartCountBadge.textContent = carrito.length;
    }

    // eliminar item
    function eliminarItem(index) {
      carrito.splice(index,1);
      renderCarrito();
    }

    // comprar todo -> muestra modal de confirmaci√≥n
    const compraModal = document.getElementById('compra-modal');
    const compraModalCerrar = document.getElementById('compra-modal-cerrar');
    function mostrarModalCompra() {
      compraModal.style.display = 'flex';
    }
    function ocultarModalCompra() {
      compraModal.style.display = 'none';
    }
    compraModalCerrar.addEventListener('click', ocultarModalCompra);

    document.getElementById('carrito-comprar').addEventListener('click', () => {
      if (carrito.length === 0) { alert('Tu carrito est√° vac√≠o'); return; }
      mostrarModalCompra();
      carrito.length = 0;
      renderCarrito();
      carritoPanel.classList.remove('open');
      if (carritoOverlay) carritoOverlay.classList.remove('visible');
    });

    // helper de seguridad XSS muy simple para nombres
    function escapeHtml(text) {
      return (text+'').replace(/[&<>"']/g, (m) => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
    }

    /**********************
     * Inicializaci√≥n: asegurar que filtros y cart badge est√©n bien
     **********************/
    renderCarrito();

    /**********************
     * Acciones extra
     **********************/
    // si el usuario hace click en la imagen de colecci√≥n, desplazarse a las tarjetas de colecci√≥n
    function scrollToCollection() {
      // activar filtro coleccion (bot√≥n)
      document.querySelector('.filtro-btn.active')?.classList.remove('active');
      const btnColeccion = document.querySelector('.filtro-btn[data-filter="coleccion"]');
      if (btnColeccion) btnColeccion.classList.add('active');

      // mostrar solo productos de la colecci√≥n
      document.querySelectorAll('.producto').forEach(prod => {
        prod.style.display = prod.dataset.category === 'coleccion' ? '' : 'none';
      });

      // mostrar cat√°logo (por si estaba oculto) y hacer scroll al cat√°logo
      const catalogo = document.getElementById('catalogo');
      if (catalogo) {
        catalogo.style.display = 'grid';
        setTimeout(()=>{ catalogo.scrollIntoView({behavior:'smooth'}); }, 50);
      }
    }

    // permitir cerrar detalle con ESC (oculta tanto compartido como individuales)
    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        ocultarTodosDetalles();
        const catalogo = document.getElementById('catalogo');
        if (catalogo) catalogo.style.display = 'grid';
        cerrarZoom();
        carritoPanel.classList.remove('open');
        if (carritoOverlay) carritoOverlay.classList.remove('visible');
      }
    });

    /**********************
     * Destacados -> ir a secci√≥n de compras (cat√°logo filtrado)
     **********************/
    function irAComprasDesdeDestacado(categoria, nombreBuscado) {
      // filtra seg√∫n categor√≠a
      document.querySelector('.filtro-btn.active')?.classList.remove('active');
      const btn = document.querySelector(`.filtro-btn[data-filter="${categoria}"]`) || document.querySelector('.filtro-btn[data-filter="all"]');
      if (btn) btn.classList.add('active');
      document.querySelectorAll('.producto').forEach(prod => {
        const matchCat = (categoria === 'all' || prod.dataset.category === categoria);
        prod.style.display = matchCat ? '' : 'none';
      });
      const catalogo = document.getElementById('catalogo');
      if (catalogo) {
        catalogo.style.display = 'grid';
        catalogo.scrollIntoView({behavior:'smooth'});
      }
      // si se pasa un nombre, intenta abrir su detalle despu√©s de un peque√±o delay
      if (nombreBuscado) {
        setTimeout(() => {
          const card = Array.from(document.querySelectorAll('.producto')).find(p => p.textContent.includes(nombreBuscado));
          if (card) card.click();
        }, 200);
      }
    }

    // listeners en tarjetas destacadas
    document.getElementById('dest-1').addEventListener('click', () => irAComprasDesdeDestacado('coleccion', 'Aurora'));
    document.getElementById('dest-2').addEventListener('click', () => irAComprasDesdeDestacado('relojes', 'Reloj Cl√°sico'));
    document.getElementById('dest-3').addEventListener('click', () => irAComprasDesdeDestacado('coleccion', 'Sol'));

    /**********************
     * ZOOM DE IMAGEN
     **********************/
    const zoomModal = document.getElementById('zoom-modal');
    const zoomImg = document.getElementById('zoom-img');

    function abrirZoom(src) {
      if (zoomModal && zoomImg) {
        zoomImg.src = src;
        zoomModal.style.display = 'flex';
      }
    }

    function cerrarZoom() {
      if (zoomModal) {
        zoomModal.style.display = 'none';
      }
    }

    // Asignar evento de click a todas las im√°genes que pueden ser ampliadas
    document.querySelectorAll('.detalle .foto img, .detalle .galeria img').forEach(img => {
      img.addEventListener('click', (e) => {
        e.stopPropagation(); // Evita que el click se propague al fondo del modal
        abrirZoom(e.target.src);
      });
    });

    // END script
  </script>

</body>
</html>
